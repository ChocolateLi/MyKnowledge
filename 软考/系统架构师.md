# 系统架构师

# 数据库

完整性约束：

实体完整性约束（primary key）

参照完整性约束(foreign key)

自定义完整性约束(触发器)



候选关键字可以推出所有属性，即可以推出所有属性集。

无损链接：只要包含候选关键字，都是无损连接。



关系代数运算和表达式？

[关系代数运算和表达式](https://blog.csdn.net/qq_34246965/article/details/115960424)

投影(σ)【where】、选择(π)【select】

顺序：π()σ()(表)

自然连接表示两个关系表中有相同名称的属性(列)，则自动作为关联条件，会去除重复的列。

等值连接，取两者笛卡尔积中属性值相等的元组，不会去重重复的。

R X S:表示等值连接，表示笛卡积，不去除重复的列。

R 蝴蝶 S：表示自然连接，会去除重复的列。



数据库设计阶段分为四个阶段：

需求分析：需求说明文档、数据字典、数据流图

概念结构：E-R图

逻辑结构：关系规范化

物理结构



嵌入式数据库系统，一般只提供本机服务接口，只为前端应用提供基本的数据支持。支持实时数据的管理，同时也支持多线程并发操作。



商业智能一般由数据仓库、联机分析处理、数据挖掘、数据备份和恢复等部分组成。



分布式数据库包括分片透明、复制透明、位置透明和逻辑透明

分片透明：用户不需要知道逻辑上访问的表具体是怎么分块存储的。

复制透明：不需要知道数据是复制到哪些节点

位置透明：不需要知道数据存放的物理位置

逻辑透明：不需要知道局部场地上使用的是哪种数据模型。



数据的转储分为静态转储和动态转储、海量转储和增量转储。

静态转储和动态转储：

1.静态转储不允许对数据库进行任何操作

2.动态转储允许对数据库进行操作，转储和事务可并发执行

海量转储和增量存储：

1.海量转储指每次转储全部数据

2.增量转储指每次只转储上次转储后更新过的数据



共享数据库为不同的应用程序提供统一的数据存储与格式定义，能够在一定程度上**缓解**数据语义不一致的问题，但无法完全解决该问题。



## 范式

规范化的目的：减少冗余，同一含义的数据只存一份

第一范式：原子性，列不可再分，没有重复的列，也没有重复的行

第二范式：非主键属性依赖于整个键，而不是其中一部分

第三范式：非主键属性只依赖于主键属性，不能依赖于其他非主键属性（即不能传递依赖）。



## 两阶段锁

两段锁协议是指每个事务的执行可以分为两个阶段：生长阶段(加锁阶段)和衰退阶段(解锁阶段)

加锁阶段：在该阶段可以进行加锁操作。在对任何数据进行读操作之前要申请并获得S锁，在进行写操作之前要申请并获得X锁。加锁不成功，则事务进入等待状态，直到加锁成功才继续执行。

解锁阶段：当事务释放了一个封锁以后，事务进入解锁阶段，在该阶段只能进行解锁操作不能再进行加锁操作。

两段封锁法可以这样来实现：事务开始后就处于加锁阶段，一直到执行ROLLBACK和COMMIT之前都是加锁阶段。ROLLBACK和COMMIT使事务进入解锁阶段，即在ROLLBACK和COMMIT模块中DBMS释放所有封锁。

两段锁协议可以保证事务串行化执行。

两段锁协议并不要求事务必须一次将所有要使用的数据全部加锁，因此遵守两段锁协议的事务可能发生死锁。

![](https://bkimg.cdn.bcebos.com/pic/ac6eddc451da81cb4a2cd0e25266d016082431d2?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2U2MA==,g_7,xp_5,yp_5/format,f_auto)



# 计算机网络

DAS(Direct-Attached Storage)：直连式存储系统，将存储设备连接到服务器上，难以扩展存储容量，而且不支持数据容错，当服务器异常时会造成数据丢失。也可以称SAS(Server-Attached Storage 服务器附加存储)，不带任何存储操作系统。

NAS(Network Attached Storage)：网络接入存储，将存储设备连接到现有网络上，可以直接联网，支持即插即用。不再通过I/O总线附属于某个特定的服务器，直接通过网络相连，用户通过网络访问。有自己的操作系统。

SAN(Storage Area Network)：存储区域网络，是一种连接存储设备和存储管理子系统的专用网络。通过专用高速网将一个或多个网络存储设备和服务器连接起来的专用存储系统。采用数据块的方式进行数据和信息的存储。主要使用于以太网(IPSAN)和光纤通道(FCSAN)。



## 大型局域网

核心层：高速转发通信、可靠性、性能、吞吐要求高，需要双机冗余热备份

汇聚层：网络访问策略控制、数据包处理、过滤、寻址

接入层：直接面向用户连接，负责用户管理的工作。

首先设计接入层，再依次完成各上层的设计。

![](D:\github\MyKnowledgeRepository\img\ruankao\网络设计.png)



## 常见网络协议

IEEE802.3/.2协议是数据链路层协议，局域网协议。

应用层协议：

FTP(文件传输协议)：运行在TCP上，21端口号传递控制信息，20端口号传递内容。

TFTP(简单文件传输协议)：建立在UDP上

HTTP(超文本传输协议)：建立在TCP上

DNS(域名解析)：使用UDP协议，端口号53



网络层协议：

IP、ICMP(网际控制报文协议)、IGMP(网际组管理协议)、ARP(地址解析协议)、RARP(反地址解析协议)

IP是无连接的、不可靠的

IP地址两部组成：网络号+主机号

A类地址：政府使用，1~126，规定以0开头的

B类地址：企业使用，128~191，规定以10开头

C类地址：普通老百姓使用，192~223，规定以110开头

D类地址：组播地址，以1110开头



为了避免IP地址的浪费，创造出了三级IP地址：网络号+子网号+主机号

子网号是从主机号当中借出来的。

子网和超网属于层次化地址编码。

![](D:\github\MyKnowledgeRepository\img\ruankao\子网和子网掩码.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\子网计算.png)

与运算：1&1=1，其他都是0。

例题中，前27位如果一样那就在同一网段，不一样就不再同一网段。

除2取余法



IPv6是一个或一组接口的标识符，是分配到接口，而不是分配给结点。

有三种类型：单播、组播、任意播

ip6无状态自动配置过程中，会将MAC地址附加在地址前缀11111111010之后，产生一个链路本地地址。

区分服务：ip4根据服务类型、ip6根据通信类型。



直连路由管理距离为0，静态路由管理距离为1

路由管理距离小于外部BGP(20)的路由信息是比较可靠的。



## 网络互联设备

![](D:\github\MyKnowledgeRepository\img\ruankao\网络互联设备.png)



## 综合布线系统

![](D:\github\MyKnowledgeRepository\img\ruankao\综合布线系统.png)

工作区子系统：连接插座的

水平子系统：同一楼层，一端连接插座，一端连接跳线架上。功能：将垂直的子系统延申到工作区，或者将用户区系统引至到管理子系统

管理子系统：管理水平和垂直系统的桥梁，同时为同一层组网提供条件

垂直(干线)子系统：各楼层设备之间的互联系统

设备间子系统：

建筑间子系统：当前这个楼和其他的楼连接



IDS：入侵检测系统。根据操作行为特征或异常行径来判断。杀毒软件就用到入侵检测系统的原理，通过特征识别病毒。

防火墙：内外网之间的隔离。外网的请求要到内网，必须通过防火墙，它会使用一些规则判断一些恶意行为。但如果攻击来自内网，防火墙就无能为力了。

网闸：一个物理隔离装置。与IDS和防火墙不同，网闸连接的两个网络是不相通的。与内网相连时，会断开与外网的连接，与外网连接时，会断开与内网的连接。分时地与内外网连接，一个时刻只与一个网络连接，保持“物理的分离”。

UTM：一体化安全设备，具备防火墙、入侵检测和网关防病毒功能。



网络系统生命周期分为5个阶段：需求规范、通信规范、逻辑网络设计、物理网络设计、实施阶段

逻辑网络阶段：根据需求规范和通信规范，实施资源分配和安全规划。

# 操作系统

高速缓存对于程序员来说是透明的。

缓存读取速度比内存快，因为缓存离CPU更近。（CPU > 缓存 > 内存 > 外部存储）

寄存器又叫缓存，存储器又叫内存。



程序计数器PC：存储下一条要执行的指令的地址

指令寄存器IR：存储即将执行的指令

状态寄存器SR：

通过寄存器GR：



CPU访问内存通常是同步方式，CPU与I/O接口交换信息通常是同步方式，CPU与PCI总线交换信息通常是同步方式，I/O接口与打印机交换信息通常采用基于缓存池的异步方式。



操作系统为用户提供了两类接口：

操作一级的接口和程序控制一级的接口。

操作一级的接口包括操作控制命令、菜单命令、窗口等；

程序控制一级的接口包括系统调用



## 进程管理

### PV操作

![](D:\github\MyKnowledgeRepository\img\ruankao\操作系统\进程管理-PV.png)



互斥模型：没有协作的

![](D:\github\MyKnowledgeRepository\img\ruankao\操作系统\互斥模型.png)



### 前驱图与PV操作

在前驱图中，箭头流出对应一个V操作，箭头流入对应一个P操作。

![](D:\github\MyKnowledgeRepository\img\ruankao\操作系统\前驱图与PV.png)



相同字母的是间接制约，不同字母的是直接制约。

如：S2和S3受到S1的间接制约，C1和P1受到S1的直接制约。

![](D:\github\MyKnowledgeRepository\img\ruankao\操作系统\直接制约与间接制约.png)



## 存储管理

虚拟存储器是一个逻辑模型，借助磁盘等辅助存储器来扩大容量。所以，虚拟存储器发生页面失效时，需要进行外部地址变换，即实现虚地址到辅存物理地址的变换。



### 页式存储 

![](D:\github\MyKnowledgeRepository\img\ruankao\操作系统\页式存储1.png)

优先淘汰访问为0的，再淘汰修改为0的。

![](D:\github\MyKnowledgeRepository\img\ruankao\操作系统\页式存储2.png)

分页存储管理：将一个进程的空间地址划分成若干个大小不等的区域，称为页。相应的，将主存空间划分成与页相同大小的若干个物理块，称为块或页框。

![](D:\github\MyKnowledgeRepository\img\ruankao\分页管理.png)

页内地址占12位，页号占20位。

过程：页号通过页表找到对应的物理块号，把块号和块内地址拼接起来就是物理地址。

页内地址等于块内地址，计算公式如上



### 内存计算

1.[内存按字节编址，地址从A4000H到CBFFFH，共有多少个字节呢？](https://blog.csdn.net/weixin_42859280/article/details/90212838)



## 嵌入式系统

嵌入式操作系统的特点：

1.微型化 2.代码质量高 3.专业化 4.实时性强 5.可裁减可配置

针对不同的硬件平台，操作系统通常建立在一个硬件抽象层，该层位于底层硬件和内核之间，为内核提供各种方便移植的宏定义接口，在不同的的平台间的移植时，只需要修改宏定义即可。

![](D:\github\MyKnowledgeRepository\img\ruankao\操作系统\嵌入式操作系统.png)

嵌入式系统采用中断方式实现输入输出的主要原因是能对突发事件做出快速响应。

在中断时，CPU断点信息一般保存到栈中。



嵌入式系统通常采用接口中的移位寄存器来实现数据的串/并和并/串转换操作。



在嵌入式系统开发中，由于嵌入式设备不具备足够的处理器能力和存储空间，程序开发一般用PC（宿主机）来完成，然后将可执行文件下载到嵌入式系统（目标机）中运行。

当宿主机和目标机的机器指令不同时，就需要交叉工具链，比如采用交叉编译器来生成目标机的可执行代码。



## 实时操作系统

实时性能指标：

* 任务切换时间
* 中断处理相关的时间指标
  * 中断延迟时间
  * 中断处理时间
* 系统响应时间
* 信号量混洗时间（指从一个任务释放信号量到另一个等待信号量的任务被激活的时间延迟）



大多数RTOS系统的调度算法都是抢占式的。



# 软件工程

## 软件开发方法

**主要开发方法：**

结构化方法：自顶向下

面向对象方法：自底向上

面向服务方法：粗粒度、松耦合、标准化和构件化

原型法：只适用于需求阶段



**其他开发方法：**

形式化方法：数学模型化

统一过程方法

敏捷方法

基于架构的开发方法（ABSD）



### 结构化方法

结构化分析方法的基本思想：自顶向下，逐层分解，把一个大问题分解成若干个更小的问题。

核心是数据字典，有三个层次模型：

数据模型：ER图

功能模型：DFD

行为模型：状态转换图



结构化设计是面向数据流的设计方法，主要包括架构设计、接口设计、数据设计和过程设计。





### 面向对象方法

面向对象的分析模型主要由顶层架构图、用例与用例图、领域概念模型构成。

面向对象设计模型则包含以**包图**表示的软件体系结构图（软件架构图）、以**交互图**表示的**用例实现图**、完整精确的**类图**、针对复杂对象的**状态图**和描述流程化处理过程的**活动图**



## 软件开发模型

注意：一个开发方法底下可以有多个开发模型



**瀑布模型：**需求明确的时候采用。

**螺旋模型：**以原型为基础+瀑布模型，引入了风险分析，增量和迭代。

**V模型：**测试贯穿始终

**喷泉模型：**早期的面向对象模型

**构件组装模型：**基于构件的开发模型由软件的需求分析定义、体系结构设计、构件库建立、应用软件构建以及测试和发布5个阶段组成。

**快速应用开发模型：**瀑布模型+构件组装模型

**统一过程模型（up）：**用例驱动、以架构为中心、增量和迭代

RUP，三个特点：迭代、用例驱动、架构设计。



RUP分解为4个顺序阶段：初始阶段、细化阶段、构建阶段和移交阶段。

初始（定义视图、模型、系统范围）、

细化（确定体系结构、制定计划、资源要求）、

构造（构造产品演进需求至产品提交）、

移交（把产品交给用户）



每个阶段结束都要安排一次技术评审，是一个迭代和增量的过程。

4个阶段就是一个开发周期，每次经过这4个阶段就会产生一代软件。但每一次的侧重点都放在不同的阶段上。



好处：软件开发的早期就可以对关键的、影响大的风险进行处理。



RUP 4+1 视图：逻辑视图、实现视图、进程视图、部署视图和用例视图

用例视图：分析人员和测试人员关心系统的行为

逻辑视图：最终用户关心的是系统的功能

实现视图：程序员

进程视图：系统集成人员关心的是系统的性能、可伸缩性、吞吐率

部署视图：系统工程师

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\统一过程开发模型.png)

**敏捷方法：**轻量级开发，减轻流程负担；适应性的、以人为本、增量迭代，小步快跑、适合小项目；

敏捷四大价值观：沟通（加强面对面沟通）、简单（不过度设计）、反馈（及时反馈）、勇气（接受变更的勇气）

敏捷开发方法的其他模型：

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\敏捷开发方法的一些模型.png)



## 逆向工程

逆向工程是设计的恢复过程



逆向工程导出的信息，4个抽象层次：

1.实现级：包括程序的抽象语法树、符号表等信息

2.结构级：程序分量之间的相互依赖关系，例如调用图、结构图等

3.功能级：程序段功能及程序段之间关系的信息

4.领域级：程序分量或程序与应用领域概念之间对应关系的信息



## 需求工程

需求工程包括需求开发和需求管理。

需求开发：需求获取、需求分析、需求定义、需求验证。

需求管理：变更控制、版本控制、需求跟踪、需求状态跟踪



**需求获取**

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\需求获取.png)



**结构化需求分析**

结构化分析方法的基本思想：自顶向下，逐层分解，把一个大问题分解成若干个更小的问题。

核心是数据字典，有三个层次模型：

数据模型：ER图

功能模型：DFD

行为模型：状态转换图



结构化分析方法的基本思想是自顶向下，逐层分解，把一个大问题分成若干个小问题。

结构化分析方法的核心是数据字典，围绕这个核心，有三个层次模型，分别是数据模型、功能模型和行为模型（状态模型）。在实际工作中，一般用ER图表示数据模型，DFD表示功能模型，状态图表示行为模型。

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\结构化需求分析.png)

**需求变更**

需求变更过程包括：问题分析和变更描述、变更分析和成本计算、变更实现



需求变更策略：

1. 所有需求变更必须遵循变更控制过程
2. 对于未获得批准的变更，不应该做设计和实现工作
3. 变更应该由项目变更控制委员会决定实现哪些变更
4. 项目风险承担者应该能够了解变更数据库的内容
5. 绝不能从数据库中删除或修改变更请求的原始文档
6. 每一个集成的需求变更必须能跟踪到一个经核准的变更请求



## 系统建模

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\系统建模.png)



## 系统设计

界面设计

结构化设计

面向对象设计



### 人机界面设计

黄金三法则：

* 置于用户控制之下
* 减少用户的记忆负担
* 保持界面一致性



### 软件设计

软件设计包括体系结构设计、接口设计、数据设计和过程设计。

结构设计：定义软件系统各主要部件之间的关系。

数据设计：将模型转换成数据结构的定义。好的数据设计将改善程序结构和模块划分，降低过程复杂性。

接口设计(人机界面设计)：与人如何通信

过程设计：结构部件转换成软件的过程描述



### 结构化设计

概要设计【外部设计】：功能需求分配给软件模块，确定每一个模块的功能和调用关系，形成模块结构图

详细设计【内部设计】：为每一个具体任务选择适当的技术手段和处理方法



结构化设计原则：

* 模块独立（高内聚低耦合）
* 保持模块的大小适中
* 多扇入（被人调用），少扇出（调用别人）
* 深度和宽度均不可过高



模块的四个要素：

1. 输入和输出。模块的输入来源和输出去向都是同一个调用者，即一个模块从调用者那儿取得输入，进行加工后再返回给调用者
2. 处理功能。把输入转换成输出所要做的工作
3. 内部数据。模块本身引用的数据
4. 程序代码。实现模块功能的程序



### 面向对象设计

面向对象设计原则：

* 单一原则：设计目的单一的类
* 开放封闭原则：对扩展开放，对修改封闭
* 里氏替换原则：子类可以替换父类。（目的是警示子类不要随便去重新父类的方法）
* 依赖倒置原则：要依赖于抽象，而不是具体的实现；针对接口编程，不要针对实现编程
* 接口隔离原则：使用多个专门的接口比使用单一的总接口要好
* 组合重用原则：要尽量使用组合，而不是继承关系达到重用（继承是一种紧耦合）
* 迪米特原则（最少知识原则）：一个对象应当对其他对象尽可能少的了解





## UML

**事物**

结构事物：静态的部分，包括：类、接口、用例、构件和节点

行为事物：代表时间或空间上的动作，包括：消息、动作次序、连接

分组事物：看成一个盒子，如包、构件

注释事物：UML模型的注释部分



**UML图**

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\UML图.png)





**UML关系理解**

![](D:\github\MyKnowledgeRepository\img\ruankao\UML\UML关系理解.png)



**类图：**

![](D:\github\MyKnowledgeRepository\img\ruankao\UML\类图的关系.png)

依赖：是一种使用关系，我开车，就是一种使用关系。在方法中传入了参数

```java
public void drive(Car car){
    car.move();
}
```

关联关系：是一种拥有关系，它使一个类知道另一个类的属性和方法。一个类拥有了另一个类的成员变量

```java
public class person{
    Car car = new Car();
    car.move()
}
```

聚合关系：是关联关系的一种特例。空心菱形。has-a，整体与部分是可分离的。比如汽车发动机是汽车的组成部分，他们之间是可分离的，所以是聚合关系。

组合关系：也是关联关系的一种特例。实心菱形。contains-a，整体与部分是不可分离的。比如人和头、嘴巴是不可分离的，所以是组合关系。



## 设计模式

**理解模式**

* 架构模式：软件中的高层决策，如C/S、B/S，反应了开发软件系统过程中所作的基本设计决策
* 设计模式：关注软件系统设计，与具体语言无关
* 惯用法：最低层模式，关注软件系统设计与实现，与语言相关





**设计模式分类**

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\设计模式.png)



### 创建型模式

**工厂方法**

速记关键字：动态生产对象

定义一个用于创建对象的接口，让子类决定将哪一个类实例化，使类的实例化延迟到子类。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\工厂方法模式.png)



**抽象工厂模式**

速记关键字：生产成系列对象

提供一个创建一系列相关的接口，无需指定他们具体的类。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\抽象工厂模式.png)



**建造者模式**

速记关键字：复杂对象构造

将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。

典型的kfc儿童套餐包括一个主食、一个辅食、一杯饮料和一个玩具。这些在套餐中可以使不同的，但是组合套餐的过程是相同的。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\建造者模式.png)



**原型模式**

速记关键字：克隆对象

拷贝原型创建对象

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\原型模式.png)



**单例模式**

速记关键字：单实例

保证一个类只有一个实例



### 结构型模式

**适配器模式**（重点）

速记关键字：转换接口

将一个类的接口转换成客户希望的另外一个接口。使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。如：电源适配器

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\适配器模式.png)



**桥接模式**（重点）

速记关键字：继承拆分树

将抽象部分与它的实现部分分离，使他们可以独立地变化。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\桥接模式.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\桥接模式1.png)



**组合模式**（重点）

速记关键字：树形目录结构

将对象组合成树形结构。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\组合模式.png)



**装饰器模式**（重点）

速记关键字：动态附加职责

动态地给一个对象添加一个额外的职责。比生成子类更为灵活

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\装饰器模式.png)



**外观模式**

速记关键字：对外统一接口

为子系统一组接口提供一个一致的界面。

使用该模式提高了底层代码访问的一致性，但降低了服务端程序的调用性能。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\外观模式.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\外观模式1.png)



**享元模式**

速记关键字：汉字编码

运用共享技术有效地复制大量的细粒度对象。

通过共享技术实现相同或相似对象的重用。



**代理模式**

速记关键字：快捷方式

使用代理对象完成用户的请求，屏蔽用户对真实对象的访问。

代理模式和适配器模式的区别：代理模式和被代理者的接口是同一个，适配器模式是接口不同。



### 行为型模式

**责任链模式**（重点）

速记关键字：传递职责

让多个对象都有可能接收请求，将这些对象连接成一条链，并且沿着这条链传递请求，直到有对象处理它为止。

系统需要对敏感词过滤，适合使用责任链模型。

**解释器模式**

速记关键字：虚拟机的机制

给定一个语言，定义它的文法，定义一个解释器，解释器解释该语言中的句子。



**模板方法模式**

速记关键字：框架

定义一个操作中算法的骨架，将一些步骤延迟到子类中。



**命令模式**（重点）

速记关键字：日志记录，可撤销

发出命令的责任和执行命令的责任分割开。可撤销的操作



**迭代器模式**

速记关键字：数据集

提供一种方法顺序访问一个聚合对象中各个元素，而无须暴露该对象的内部表示。



**中介者模式**（重点）

速记关键字：不直接引用

用一个中介对象来封装一系列的对象交互

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\中介者模式.png)



**备忘录模式**

速记关键字：游戏存档

在不破坏封装性的前提下，将对象恢复到原先保存的状态。



**观察者模式**（重点）

速记关键字：订阅、广播、联动

观察者模式定义了对象间的一种一对多依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新。



**状态模式**（重点）

速记关键字：状态变成类

对于对象内部的状态，允许其在不同的状态下，拥有不同的行为，对状态单独封装成类。



**策略模式**（重点）

速记关键字：多方案切换

定义了一系列算法，并将每个算法封装起来，使它们可以相互替换，让算法独立于它的客户而独立变化。



**访问者模式**

速记关键字：数据与操作分离

对于某个对象或一组对象，不同的访问者，产生的结果不同，执行的操作也不同。



## 软件测试

**测试类型**

动态测试

* 黑盒测试
  * 等价类划分
  * 边界值分析
  * 错误猜测
  * 因果图
* 白盒测试
* 灰盒测试（黑 + 白）



静态测试

* 桌前检查
* 代码审查
* 代码走查



基准测试：把应用程序中最用最频繁的那部分核心程序作为评价计算机性能的标准程序

**测试阶段**

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\软件测试阶段.png)



集成测试策略

* 一次性组装【风险高】
* 增量式组装【测试全面】
  * 自顶向下【需要桩模块】
  * 自底向上【需要驱动模块】
  * 混合式【都需要】



系统测试

* 功能测试
* 性能测试
  * 负载测试：各种工作负载下系统的性能
  * 压力测试：系统的瓶颈或不能接受的性能点
  * 强度测试：系统资源特别低的情况下运行
  * 容量测试【并发测试】：同时在线的最大用户数



系统测试是根据系统方案说明书来设计测试用例，路径测试不是系统测试的内容，安装测试属于系统测试的内容。



## 系统演化策略

**遗留系统演化策略**

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\遗留系统演化策略.png)

## 系统运行与维护

* 改正性维护（正确性维护）：改正在系统开发阶段已发生而系统测试阶段尚未发现的错误
* 适应性维护：软件适应环境变化【外部环境、数据环境】而进行的修改
* 完善性维护：扩充功能和改善性能而进行的修改
* 预防性维护：为了适应未来的软硬件变化，主动增加预防性的新功能，以使系统适应各类变化而不被淘汰



# 架构设计

## 架构概念

架构设计主要关注软件组件的结构、属性和**交互作用**，并通过多种**视图**全面描述特定系统的架构。

**架构的本质**

1.软件架构为软件系统提供了一个**结构、行为和属性的高级抽象**

2.软件架构风格是特定应用领域的表达方式和**惯用模式**，架构定义了**一个词汇表和一组约束**



**架构的作用**

1.项目干系人进行交流的手段

2.可传递可复用的模型

3.有助于循序渐进的原型设计



软件架构 = 软件体系结构

架构设计就是需求分配，即将**满足需求的职责分配到组件上**



## 架构4+1视图

对应UML的 4+1 视图

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构4+1视图.png)

逻辑视图：描述设计的对象模型和对象之间的关系

开发视图：描述软件模块的组织与管理

进程(过程)视图：描述设计的并发和同步特征







## 架构风格

架构风格定义了一类架构所共有的特征，反映了领域中众多系统中所有的**结构和语义**两个方面的特征，包括：架构定义、架构词汇表和架构约束。

[架构风格](https://blog.csdn.net/weixin_40972073/article/details/125400460)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构风格.png)



### 数据流风格

数据流风格是支持并行的，但它的交互性比较差。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\数据流风格.png)

批处理和管道过滤器

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\数据流风格-子风格.png)

Web服务在数据传输方面具有协议分层的特征，因此需要数据内容的逐步分解与而分阶段处理。

管道-过滤器的架构风格支持分阶段的数据处理，因此特别适合。



### 调用返回风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\调用返回风格.png)

其中分层风格最为重要

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\分层架构风格.png)

分层结构的特点是通过引入抽象层，在较低层次不确定的实现细节在较高层次会变得确定，并能够组织层间构件的协作，系统架构更加清晰。

### 独立构件风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\独立构件风格.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\独立构件优缺点.png)

独立构件风格包括进程通信架构风格和事件驱动架构风格。

1.进程通信架构风格中，构件是独立的进程，连接件是消息传递，这种风格的特点是构件通常是命名过程，消息传递的方式可以是点到点，异步和同步方式以及远程过程调用等。

2.事件驱动架构风格中，构件不直接调用一个过程，而是触发或广播一个或多个事件，系统中其他构件中的过程在一个或多个事件中注册，当一个事件被触发，系统自动调用在这个事件中注册的所有过程。



Windows操作系统在图形用户界面处理方面采用的是典型的“事件驱动”的架构风格，首先注册事件处理的是回调函数，当某个界面事件发生时（例如键盘敲击、鼠标移动）等，系统会查找并选择合适的回调函数处理事件。



事件驱动又称为隐式调用



对于采用过程调用架构风格的系统，将显示调用策略替换为隐式调用策略能够提高系统的灵活性，但会降低系统的性能。

### 虚拟机风格

类比 java 虚拟机

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\虚拟机风格.png)

多种组合，灵活的，工作流引擎比较适合，而工作流引擎一般都是解释器执行，因此适合采用解释器架构风格。

### 仓库风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\仓库风格.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\仓库风格优缺点.png)



**常考题型：两种架构比较**

| 比较因素 | 管道-过滤器风格        | 数据仓库风格                         |
| -------- | ---------------------- | ------------------------------------ |
| 交互方式 | 顺序结构或有限循环结构 | 工具之间无交互，通过数据仓库间接交互 |
| 数据结构 | 流式数据               | 文件或模型                           |
| 控制结构 | 数据驱动               | 业务功能驱动                         |
| 扩展方式 | 接口适配               | 与数据仓库进行数据适配               |

现代编译器采用以数据共享为中心的架构风格。

### 闭环控制风格(过程控制)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\闭环控制风格.png)

闭环控制风格通常适用于处理简单任务，不适用于复杂的任务。



### C2风格

C2体系结构风格：通过连接件绑定在一起，按照一组规则运作的并行构件网络。

两个构件不允许直接相连，两个连接件可以。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\C2风格.png)



### 层次架构风格

两层C/S -> 三层C/S -> 三层B/S -> 混合架构



#### MVC风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\MVC风格.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\MVC风格1.png)





#### MVP风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\MVP风格.png)

#### MVVM风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\MVVM风格.png)





### 基于服务的架构（SOA)

SOA是一个组件模型，它将应用程序的不同功能单元(称为服务)通过这些服务之间定义良好的接口联系起来。接口是采用中立的方式定义，独立于实现服务的硬件平台、操作系统和编程语言。这使得构建在各种这样的系统中的服务可以一种统一和通用的方式进行交互。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\SOA.png)

服务构件对象的关系

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\服务构件对象的关系.png)



#### WEB Service

基于Web Services实现的面向服务系统中，服务提供者、服务使用者和服务注册器之间的远程交互通过**SOAP**（简单对象访问协议）消息实现，服务内容描述通过WSDL（web服务描述语言）标准实现，服务注册信息通过UDDI（服务同一描述、发现和集成）框架实现，通过**BPEL**（业务过程执行语言）将分散的、功能单一的web服务组织成一个复杂的有机应用。

关键技术

发现服务：UDDI

描述服务：WSDL

消息格式层：SOAP、REST

WSDL用来描述服务，UDDI用来注册和查询服务，而SOAP作为传输层，用来在消费者和服务者之间传送消息，一个消费者可以在UDDI注册查找服务，取得服务的WSDL的描述，然后通过SOAP来调用该服务。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\web service.png)

#### ESB（企业服务总线）

ESB的作用与特点：

1、SOA的一种实现方式，ESB在面向服务的架构中起到总线作用，将各种服务进行连接和整合。

2、描述服务的元数据和服务注册管理。

3、在服务请求者和提供者之间传递数据，以及对这些数据进行转换的能力。

4、支持服务之间的动态交互，解耦服务请求者和服务提供者。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ESB架构.png)



#### 微服务和SOA对比

SOA是整，微服务是拆。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\微服务和SOA对比.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\微服务和SOA对比2.png)



### MDA-模型驱动架构

通过映射的方式，通过平台无关模型映射成平台相关模型。一种形式化方法之下的产物

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\MDA.png)



### ADL-架构描述语言

ADL是一种形式化语言

三个基本元素：

构件、连接件、架构配置



### DSSA-特定领域软件架构

针对特定领域来完成架构设计，相当于抽取共性，来完成架构设计。



以特定问题领域为对象，形成由领域参考模型、参考需求、**参考架构**等组成的开发基础架构。



基本活动：

1.领域分析：主要目的是获得**领域模型**

2.领域设计：主要目的是获得**特定领域软件架构**(DSSA)，DSSA描述领域模型中表示需求的解决方案；

3.领域实现：依据领域模型和DSSA 进行实现



三个层次系统模型：

1.领域开发环境：领域架构师

2.领域特定应用开发环境：应用工程师

3.应用执行环境：操作人员



4个角色：

领域专家：主要任务是提供关于领域中系统的需求规约和实现的知识

领域分析人员、

领域设计人员、

领域实现人员

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\DSSA1.png)



## ABSD-基于架构的软件开发方法

又称基于体系结构的软件开发方法



在架构方面，对非功能性需求（性能、可用性、可修改性、安全性）远超过对功能性需求。
三个基础：对系统进行功能分解、采用**架构风格**实现质量属性与商业需求、采用软件模板设计软件结构。

强调采用**视角和视图**来描述软件架构，采用**用例和质量属性场景**来描述需求。用例描述的是功能需求，质量场景描述的是质量需求（非功能需求）



### 概念

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ABSD.png)

### 开发过程

ABSD方法是一个自顶向下，递归细化的过程，软件系统的架构通过该方法得到细化，直到能产生软件构件的类。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ABSD2.png)

架构复审要安排一次由外部人员（用户代表和领域专家）参加的复审，复审的过程中，通常会对一个可运行的最小化系统进行架构评估和测试。



**架构需求和架构设计过程**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ABSD3.png)

**架构实现和架构演化过程**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ABSD4.png)



## 软件架构评估

### 质量属性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构评估-质量属性.png)

性能：系统响应能力。通常采用资源调度策略、增加系统资源。

可用性：正常运行的时间比例。心跳、冗余策略、ping。

可修改性：方便修改。隐藏信息、运行时注册。灵活性高了修改起来就比较容易。

安全性：阻止非授权用户使用服务的能力。审计追踪、限制访问。



#### 性能

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\性能.png)



对运行系统进行评估的主要目的是评价信息系统在性能方面的表现，找出系统可能存在的性能瓶颈。

其中，常见的Web服务器性能评估方法有基准测试、压力测试和可靠性测试等；评价Web服务器的主要性能指标有最大并发连接数、相应延迟和吞吐量等。当系统性能降到基本水平时，需要找出影响性能的瓶颈并消除该瓶颈。



#### 可用性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\可用性.png)

#### 安全性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\安全性.png)

#### 可修改性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\可修改性.png)

#### 易用性和可测试性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\易用性和可测试性.png)

### 四个点

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\四个点.png)



### 架构评估方法-基于场景的评估方法

#### 软件架构分析方法（SAAM）

主要输入：问题描述、需求说明和架构描述

分析过程包括：场景开发、架构描述、单个场景评估、场景交互和总体评估

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\SAAM.png)

#### 架构权衡分析法（ATAM）

该框架主要关注系统的需求说明

架构权衡分析方法（ATAM)

是一种系统架构评估方法，关注系统的**需求说明**，主要在系统开发前，针对性能、可用性、安全性和可修改性等质量属性进行评价和折中。

4个主要活动阶段：需求收集、**架构视图描述**、属性模型构造和分析、架构决策与折中，整个过程强调以**属性**作为架构评估的核心概念

在评估过程中，**权衡点**是一个会影响多个质量属性的架构设计决策

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ATAM.png)

#### 成本效益分析方法（CBAM）

知道它是基于场景的评估方法就行，其他不必过于深究。

### 质量效用树

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\质量效用树.png)

L:低级 M:中级 H:高级



## 构件与中间件

### 构件

软件构建是部署、版本控制和替换的基本单位。是一组通常需要同时部署的原子构件。原子构件通常成组部署，但是也能够单独部署。大多数原子构件都属于一个构件家族。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\构件.png)



基于构件的开发模型由软件的需求分析定义、体系结构设计、构件库建立、应用软件构建以及测试和发布5个阶段组成。



### 中间件

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\中间件.png)

中间件优点：

1. 面向需求
2. 业务的分隔和包容性
3. 设计与实现隔离
4. 隔离复杂的系统资源
5. 符合标准的交互模型
6. 软件复用
7. 提供对应用构件的管理



### 构件复用

**复用的历史发展路线**

函数库 -> 类库 -> 构件库 -> 服务库



**复用的维度**

水平复用：不分行业领域，通用

垂直复用：分行业领域，专用



**构件复用流程**

检索与提取构件、理解与评价构件、修改构件、组装构件



检索方法：1.基于关键字检索、2.刻面检索法、3.超文本检索法

构件组装的方式：1.基于功能组装、2.基于数据组装、3.面向对象组装



### 构件标准

三大构件标准

* CORBA
  * 伺服对象(Servant)：CORBA对象的真正实现，负责完成客户端请求
* COM
* EJB
  * 会话Bean：实现业务逻辑
  * 实体Bean：实现O/R映射
  * 消息驱动Bean：处理并发与异常访问



对象管理组织(OMG)基于CORBA基础设施定义了4中构件标准。

实体构件（Entity）：长期持久化，主要用于事务性行为，由容器管理持久化

加工构件（Process）：由容器管理持久化，但客户端没有可访问的主键

会话构件（Session）：不需要容器管理持久化，状态信息自己管理

服务构件（Service）：无状态的

# 系统安全分析与设计

## 对称加密和非对称加密

**对称加密**

缺陷：1.加密强度不高，但效率高 2.密钥分发困难

对称加密算法：DES、RC5、IDEA、AES

使用大数据量数据的加密传输



**非对称加密**

缺陷：加密速度慢

非对称加密算法：RSA、ECC



## 信息摘要

信息摘要：单向散列函数、固定长度的散列值

常见的信息摘要算法有MD5（128位）和SHA（160位）等

作用：防止篡改



## 数字签名

作用：防止抵赖

![](D:\github\MyKnowledgeRepository\img\ruankao\安全\数字签名.png)



## 数字证书

数字证书内容：

* 证书的**版本信息**
* 证书的**序列号**
* 证书使用的签名算法
* 证书的发行机构名称
* 证书的**有效期**
* 证书所有人的名称
* 证书所有人的**公开密钥**（没有私钥）
* **证书发行者对证书签名**



## PKI公钥体系

![](D:\github\MyKnowledgeRepository\img\ruankao\安全\PKI公钥体系.png)

## 网络安全协议

![](D:\github\MyKnowledgeRepository\img\ruankao\安全\网络安全协议.png)



## 网络威胁与攻击

被动攻击：收集信息为主，破坏保密性

* 窃听（网络监听）
* 业务流分析
* 非法登录

主动攻击：类别有：中断（破坏可用性）、篡改（破坏完整性）、伪造（破坏真实性）

* 假冒身份
* 抵赖
* 旁路攻击
* 重放攻击。加时间戳可以解决
* 拒绝服务(DOS)



ARP攻击可让攻击者取得局域网上的数据封包甚至可篡改封包，且让网络上特定计算机或所有计算机无法正常连接。

ARP攻击造成网络无法跨网段通信的原因是伪造网关ARP报文使得数据包无法发送到网关。

## 安全保护登记

![image-20230828121959223](D:\github\MyKnowledgeRepository\img\ruankao\安全\安全保护等级1.png)



![image-20230828122224360](D:\github\MyKnowledgeRepository\img\ruankao\安全\安全保护等级2.png)

# 系统可靠性分析与设计

## 相关概念

可靠性是指软件系统在系统错误面前，在意外或错误使用的情况下，维持软件系统的功能特性的基本能力。

可用性是指系统能够正常运行的时间比例。



## 可靠性指标

![image-20230830202254848](D:\github\MyKnowledgeRepository\img\ruankao\可靠性设计\可靠性指标.png)



## 可靠性计算

串并联系统

![image-20230830202610691](D:\github\MyKnowledgeRepository\img\ruankao\可靠性设计\串并联系统.png)

混合系统

![image-20230830202751038](D:\github\MyKnowledgeRepository\img\ruankao\可靠性设计\混合系统.png)



## 可靠性设计

影响软件可靠性的因素：

1. 软件的开发方法和开发环境
2. 运行环境
3. 软件规模
4. 软件内部结构
5. 软件的可靠性投入



**容错技术**

* N版本程序设计（静态冗余）

  ![image-20230830204754434](D:\github\MyKnowledgeRepository\img\ruankao\可靠性设计\N版本程序设计.png)

* 恢复块设计（动态冗余）

  ![image-20230830204826177](D:\github\MyKnowledgeRepository\img\ruankao\可靠性设计\恢复块设计.png)

* 防卫式程序设计（try catch的方式）



**双机容错**

* 双机热备份模式（主系统、备用系统）
* 双机互备模式（同时提供不同的服务，心不跳则接管）
* 双机双工模式（同时提供相同的服务，集群的一种）



# 系统开发基础（零散知识）

软件开发环境包括数据集成、控制集成和界面集成。

环境集成机制：

数据集成：访问信息的统一的数据接口规范

界面集成：统一界面，统一操作

控制集成：支持开发活动之间的通信、切换、调度和协同工作



软件开发环境，根据功能，可以划分为环境信息库、过程控制与消息服务器、环境用户界面。



在对数据库集成中，单表采用主动记录集成，多表采用数据映射进行整合。



当需要集成并灵活定义系统功能之间的协作关系时，应该采用基于**工作流**的功能关系定义方式。	



配置项主要有两大类：

1.产品：需求文档、设计文档、源代码、测试用例

2.项目管理：工作计划、项目质量报告、项目跟踪报告



可行性分析：经济可行性、技术可行性、法律可行性、用户使用可行性



单元测试也称为模块测试，测试一个模块时，需要为该模块编写一个驱动模块和若干个桩模块。

驱动模块用来调用被测模块，桩模块用来模拟被测模块所调用的子模块。

自顶向下的单元测试先测试上层模块，再测试下层模块。测试下层模块时由于它的上层模块已测试过，所以不必另外编写驱动模块。

自底向上，测试上层模块时由于它的下层模块已经测试过，所以不必另外编写桩模块。



产品范围定义是信息系统要求的度量，而项目范围的定义是生产项目计划的基础。

产品范围的描述是项目范围说明书的重要组成部分。

项目范围定义的输入包括以下内容：

1.项目章程

2.项目范围管理计划

3.组织过程资产

4.批准的变更申请



项目文档管理方案、项目合同文本不属于范围定义的输入。



软件活动主要有：1.软件描述 2.软件开发 3.软件有效性验证 4.软件演化

按软件过程活动将软件工具分为软件开发工具、软件维护工具、软件管理工具和软件支持工具。

在软件系统工具中，版本控制工具属于软件维护工具，软件评价工具属于软件管理与软件支持工具。







GB强制性国家标准，GB/T推荐性国家标准。



CISC(复杂指令集计算机)的指令系统复杂，难以用硬布线逻辑电路实现控制器，通常采用微程序控制。

RISC (精简指令集计算机)适合采用硬线控制逻辑



## 企业应用

企业应用集成有三种：

面向信息集成：主要技术数据复制、数据聚合和接口集成

面向过程集成：处理不同应用系统之间的交互逻辑，与核心业务逻辑相分离，并通过不同应用系统之间的协作共同完成某项业务功能。

面向服务集成：是一个个web服务或者封装web服务的业务处理，支持服务接口描述和服务处理的分离。



企业信息集成，按照组织范围分，分为内部的信息集成和外部的信息集成。

按照集成内容，可以划分为四个方面：

技术平台集成、

数据集成、

应用系统集成：实现不同系统之间的互操作，使得不同应用系统之间能够实现数据和方法的共享。

业务过程集成：实现不同应用系统的连接、协调和共享。





企业门户是一个信息技术平台，可以分为三种：

企业信息门户：访问数据时提供统一入口，实现收集、访问、管理无缝集成。

企业知识门户：提供一个知识平台，团队成员取得联系。

企业应用门户：提高企业的集中贸易能力、协同能力和信息管理能力的平台。



企业战略模型可分为数据库模型和数据仓库模型。

数据库模型：描述日常事务处理的关系。

数据仓库模型：描述高层决策所需要的信息。



企业信息化建设：运用信息技术，进行知识挖掘和业务流程管理。

企业信息化方法包括：业务流程重组、核心业务应用、信息系统建设、资源管理和人力资本投资方法。

企业信息资源集成前提是对企业**信息功能**的集成，核心是对企业**内部和外部信息流**的集成

企业信息化对企业管理，将作为管理核心的财务、物料管理，专向技术、物资、人力资源的管理，进而扩展对客户关系和供应链的管理到发展电子商务。



CRM将人力资源、业务流程与专业技术进行有效整合。四个主要模块：销售自动化、营销自动化、客户服务与支持、商业智能。



ERP：物流、资金流和信息流的管理系统。

五个层次生产计划：

生产预测计划：对市场需求进行比较准确地预测

销售管理计划：对销售部门的相关业务进行管理

生产计划大纲：根据经营计划的生产目标制定

主生产计划：一定时期内生产什么，生产多少

物料需求计划：采购

能力需求计划：认识企业生产能力的瓶颈



## 分布式

分布式系统分为5个逻辑计算层：

表示层：实现用户界面

表示逻辑层：生成数据表示而必须进行的处理任务，如输入数据编辑等

应用逻辑层：支持业务的处理过程，数据计算和分析

数据处理层：存储和访问数据库，查询语句和存储过程

数据层：实际存储的业务数据



客户机/服务器系统开发时可以采用不同的分布式计算架构。

分布式表示架构：表示层和表示逻辑层在客户机，应用逻辑层、数据处理层和数据层仍在服务器

分布式数据架构：表示层、表示逻辑层、应用逻辑层在客户机，数据处理层和数据层在服务器

分布式数据和应用架构：表示层和表示逻辑层在客户机、应用逻辑层在应用服务器上，数据处理层和数据层在数据服务器上。



# 保护法

著作权不保护思想，因此可以通过反编译技术获得他人软件所使用的思路，并直接用于自己的软件产品中，不构成侵权。



即使未签劳动合同，在公司开发的软件软件著作权仍然属于公司。



著作权法规定：作者的署名权、修改权、保护作品完整权的保护期不受限制。

发表权的保护期受时间限制





# 案例分析

重点内容：

软件架构设计：软件架构设计（必考）、软件质量属性（第一、重点）、架构模型（风格）（第二、重点）、架构评估

设计模式：设计模式分类

系统设计：数据库设计、中间件以及应用服务器、性能设计与性能评估



## 软件工程

### 需求分析-结构化分析

自顶向下分析

数据流图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\数据流图.png)



平衡原则：父子图平衡

异常问题：

黑洞：一个加工只有输入流而没有输出流

奇迹：一个加工只有输出流而没有输入流

灰洞：一个加工的输入流无法通过加工产生输出流



结构化分析方法的基本思想是自顶向下，逐层分解，把一个大问题分成若干个小问题。

结构化分析方法的核心是数据字典，围绕这个核心，有三个层次模型，分别是数据模型、功能模型和行为模型（状态模型）。在实际工作中，一般用ER图表示数据模型，DFD表示功能模型，状态图表示行为模型。

### UML图

用例图关系

包含关系：是必须选择的

扩展关系：是可选的

泛化关系：一定可以呈现父子关系，而包含关系不一定呈现。

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\用例图关系.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\用例关系2.png)

用例规约

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\用例规约.png)



类图关系

聚合关系：整体消亡了，部分还可以存在，生命周期不同。

组合关系：整体消亡了，部分也消亡，生命周期相同。

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\类图关系.png)



顺序图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\顺序图.png)



通信图（协作图）

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\通信图.png)



状态图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\状态图.png)



活动图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\活动图.png)

泳道活动图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\泳道活动图.png)



部署图

系统已经开发完毕了，如何去部署软件硬件的问题。

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\部署图.png)



## 数据库设计

数据库设计关注的问题：性能、数据一致性、安全



**数据库设计过程**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\数据库设计过程.png)

**规范化-范式**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\范式.png)

范式级别提升带来了什么负面影响？

数据库规范化的过程，实际上是对数据表的不断拆分，以达到更高的规范化程度。这样处理带来的问题是：系统大量查询不能通过单表来完成，而是需要将多表进行连接查询，所以表拆分的越多，查询性能也就越差。



**反规范化**

规范化设计后，数据库设计者希望牺牲部分规范化来提高性能，这种规范化设计的回退方法称为反规范化。

优点：提高统计、查询效率

缺点：增加了数据冗余，浪费存储空间。增删改的效率降低，可能导致数据不一致，可能产生添加、修改、删除异常。

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\反规范化.png)

反规范化技术：

(1)增加冗余列：通过增加数据冗余减少或避免查询时的连接操作。

(2)增加派生列：在表中可以增加由本表或其他表中数据计算生成的列，减少查询时的连接操作并避免计算或使用集合。

(3)表水平分割：把数据放到多个独立的表中，主要用于表数据规模很大、表中数据相对独立

(4)表垂直分割：对表进行分割，将主键与部分列放到一个表中，主键与其他列放到另一个表中，查询时减少I/O次数。



反规范化缺点

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\反规范化缺点.png)



**索引**

提高查询效率，但降低了增加、修改、删除的效率，并且索引占用存储空间；B树和B+树；



**视图**

并不在数据库中实际存在，而是一种虚拟的表

优点：

1.视图能简化用户的操作

2.视图机制可以使用户以不同的方式查询同一数据

3.视图对数据库重构提供了一定程度的逻辑独立性

4.视图可以对机密数据提供安全保护



物化视图：将视图的内容物理存储起来，其数据随原始表变化，同步更新。



**数据不一致问题**

数据存了多份，存在了不同的地方，一份数据是不可能出现数据不一致问题的。

解决办法：应用程序、触发器、物化视图



**分区分表分库**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\分区分表分库.png)



分区方式

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\分区方式.png)



分区优点：

1.相对于单个文件系统或硬盘，分区可以存储更多的数据

2.数据管理方便。比如要清理或者废弃某年的数据，可直接删除该日期的分区数据

3.精准定位分区查询数据，不需要全表扫描，大大提高数据库检索效率

4.可跨多个分区磁盘查询，来提高查询的吞吐量

5.在涉及聚合函数查询时，可以很容易进行数据的合并



**分布式数据库系统**

主要考查点：

分布透明性

* 分片透明：分不分片用户感受不到
  * 水平分片：按行(记录)分
  * 垂直分片：按列(字段)分
* 位置分片：数据存在哪里，用户不用管



**NoSQL**

两者对比

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\NoSQL对比.png)



**联邦数据库系统**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\联邦数据库系统.png)



**数据库性能优化**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\数据库性能优化.png)

**sql优化**

sql语句设计时，影响查询效率的设计原则：

1.查询时尽量不要返回不需要的行、列

2.进行多表查询时，尽量使用连接查询，避免使用子查询

3.尽量避免采用not in、not exist、like等使用全表查询的操作

4.尽量避免使用distinct关键字



## 架构设计

### 架构风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构风格.png)



### 软件架构评估-质量属性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构评估-质量属性.png)

敏感点：为了实现某种特定的质量属性，一个或多个构件的特性。

权衡点：影响多个**质量属性**的特性，是多个质量属性的敏感点。通常权衡安全性和性能这两个质量属性。

风险点：架构设计中潜在的、存在问题的架构决策所带来的隐患。

非风险点：不会带来隐患，一般以“xx要求是可以实现或可接受的”方式表达



### Web架构

考查点：高性能、高可用、可维护、可应变、安全性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\Web架构.png)



#### 集群、负载均衡

集群的引入会带来的问题：

1.用户请求由谁来转发给具体的应用服务器？（负载均衡）

2.用户每次访问的服务器不一样，那么如何维护session一致性问题？（有状态、无状态问题） 





引入负载均衡 + session共享机制

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\负载均衡+session共享.png)



**负载均衡技术**

* 应用层

  * HTTP重定向

    HTTP重定向就是应用层的请求转发。用户的请求其实已经到了HTTP重定向负载均衡服务器，服务器根据算法要求用户重定向，用户收到重定向，再次请求真正的集群。

    特点：实现简单，但性能较差

  * 反向代理

    在用户请求到达反向代理服务器时，由反向代理服务器根据算法转发到具体的服务器。常用nginx作为反向代理服务器

    特点：部署简单，但代理服务器可能成为性能瓶颈。

* 传输层

  * 基于DNS的负载均衡

    DNS域名解析负载均衡就是在用户请求DNS服务器，获取域名对应的IP地址时，DNS服务器直接给出负载均衡后的服务器IP。

    特点：效率比HTTP重定向高，减少维护负载均衡服务器的成本。但一个应用服务器故障，不能及时通知DNS，而且DNS负载均衡的控制权在域名服务商那里，网站无法做更多的改善和更强大的管理。

  * 基于NAT的负载均衡

    将一个外部的IP地址映射为多个IP地址，对每次连接请求动态地转换为一个内部节点的地址。

    特点：技术较为成熟，一般在网关位置，可以通过硬件实现。像四层交换机一般采用这样的技术



**均衡算法**

* 静态算法
  * 轮转算法：轮流将服务请求调度给不同的节点
  * 加权轮转算法：考虑不同节点处理能力的差异
  * 源地址哈希散列算法：根据请求的源IP地址，作为散列键从静态分配的散列表找出节点。
  * 目标地址哈希散列算法：根据请求的目标的IP地址进行散列
  * 随机算法：随机分配，简单，但不可控
* 动态算法
  * 最小连接数算法：新请求分配给当前活动请求数量最少的节点，每个节点处理能力相同的情况下。



**有状态和无状态**

无状态服务：对单次请求不依赖于其他请求，即处理一次请求所需要的全部信息，服务器本身不存储任何信息。

有状态服务：会在自身保存一些数据，先后的请求是有关联的。



#### 数据持久化

**ORM**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ORM.png)



#### 读写分离

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\数据库读写分离.png)

#### 缓存

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\缓存技术.png)



**缓存与数据库的协作（Redis与关系数据库同步方案）**

（一）读取操作

1.根据key从缓存中读取

2.若缓存中没有，则根据key在数据库中查找

3.读取到值之后更新缓存

（二）数据写入

1.根据key值写入数据库

2.根据key更新缓存



**Redis和Mecache比较**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\Mecache和Redis比较.png)

MemCache存在数据可靠性和一致性的问题，原因是：

(1)MemCache没有持久化功能，所以断电数据会全部丢失，而且无法恢复，这存在可靠性问题。

(2)MemCache不支持事务，所以操作过程中可能产生数据的不一致性。



**Redis集群切片**

集群切片的基本思想：Redis不止一台服务器，可能有多台，那数据到底存在哪台服务器？

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\Redis集群切片.png)



分片方案

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis数据分片方案.png)

一致性哈希算法建立了一个圈圈机制，把服务器和哈希值都描绘在圆圈上面，然后根据圆圈顺时针方向找到哪一台服务器，就把数据存在哪一台服务器上面，建立了一种动态规则。（适合新增服务器）

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis分片方案1.png)



**Redis分布式存储**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\Redis分布式存储方案.png)



**redis数据类型**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis数据类型.png)



**redis淘汰策略**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis淘汰策略.png)

**redis持久化**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis持久化.png)



**redis常见问题**



![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\缓存雪崩.png)



![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\缓存穿透.png)



![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\缓存降低.png)



#### CDN（内容分发网络）

思想：建立镜像站点，当有访问请求时，以就近原则为访问。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\CDN.png)



#### web系统分层

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\web系统分层.png)



# 真题

## 2009年

第一次：58分

第二次：51分

### 综合知识

第5题：数据库设计需求分析阶段应完成的文档是数据字典和数据流图



8.无损连接分解，都是能推所有属性，所以，只要是包含候选关键字的，都是无损连接。



11.高速缓存对于程序员来说是透明的



16.

基准测试：公认的评价方法。测试多种计算机系统，比较和评价它们的性能。

负载测试：运行某种诊断程序，加大负载，检查哪个设备会发生故障。

集成测试：测试模块之间的接口是否正常起作用。

白盒测试：根据程序内部结构和内部逻辑，测试其功能是否正确。

黑盒测试：功能测试，根据外部功能来设计测试用例。



17.除cpu主频外，内存大小对计算机实际运行的处理速度也密切相关。



19.集成有三种：

面向信息集成：主要技术数据复制、数据聚合和接口集成

面向过程集成：处理不同应用系统之间的交互逻辑，与核心业务逻辑相分离，并通过不同应用系统之间的协作共同完成某项业务功能。

面向服务集成：是一个个web服务或者封装web服务的业务处理，支持服务接口描述和服务处理的分离。



35.基于构件的开发模型由软件的需求分析定义、体系结构设计、构件库建立、应用软件构建以及测试和发布5个阶段组成。



41.物理数据流图(PDFD)是网络架构DFD，显示的信息：1.服务器、客户端及其物理位置 2.处理器说明信息 3.传输协议 



43.系统测试：恢复测试、安全性测试、压力测试、性能测试、可靠性测试、可用性测试、可维护性测试和安装测试



48.基于架构的软件设计(ABSD)强调由商业、质量和功能需求的组合驱动软件架构设计。

是一个自顶向下，递归细化的过程。

三个基础：功能分解、选择架构风格、软件模板使用



50.架构复审人员由用户代表和领域专家参加复审。通常会对一个可运行的最小化系统进行架构评估和测试。



53.管道-过滤风格支持分阶段数据处理，特别适合服务端处理软件的需求。



55.闭环结构：适用于处理简单任务，并不适用于复杂任务。

分层结构：引入抽象层，在较低层次不确定的实现细节在较高层次会变得确定。



57.**架构模式**反映了开发软件系统过程中所作的基本设计决策；设计模式主要关注软件系统的设计，与具体的实现语言无法；惯用法则是描述如何实现构件及构件之间的关系，例如引用-计算式C++中的一种惯用法。



61.访问者模式：对某个固定结构的活动节点有多种处理能力，且处理能力可扩展。在不改变原来类结构的基础上增加新功能。访问者不破坏原有功能。



64.数据库容灾属于网络安全和应用安全考虑的范畴。



65.加密算法中，对称加密比非对称加密效率要高。RSA和ECC属于非对称加密算法，MD5为摘要算法，RC-5是对称加密算法。



### 案例分析

#### 第一题

1.1、

性能、可用性、可修改性、安全性、可靠性、易用性。

性能：系统的响应能力，指经过多长时间才能对某个事件做出响应。

可用性：系统正常运行的时间比例。

可修改性：能够快速地以较高的性能价格比对系统进行变更的能力。

安全性：系统向合法用户提供服务的同时能够阻止非授权用户使用服务的能力。

可靠性：系统在应用或错误面前维持软件系统功能的特性。

易用性：衡量用户使用软件产品的难易程度。



1.2、

(1)性能。可采用架构设计策略：增加计算资源、资源调度(先进先出队列、优先队列)

(2)安全性。可采用追踪审计、限制访问、入侵检测等

(3)可用性。主动冗余、心跳机制

(4)可修改性。隐藏信息、运行时注册



#### 第二题

2.1

数据流图作为一种图形工具，用来说明业务处理过程、系统边界内所包含的功能和系统中的数据流。

流程图是以图形化的方式展示应用程序从输入开始到获得输出为止的逻辑过程，描述处理过程的控制流。

两者区别：

(1)数据流图的处理过程可并行；流程图在某个时间点只能处理一个过程。

(2)数据流图展现了系统的数据流；流程图展现了系统的控制流。

(3)数据流图适用于系统分析中的逻辑建模阶段，流程图适用于系统设计中的物理建模阶段。



2.2

思路：先分析加工、再分析存储、最后分析外部实体

(1)“分类训练”加工：只有输入流没有输出流

(2)“分类处理”加工：只有输出流没有输入流

(3)“规则文件”数据流：外部实体没有经过加工，直接到数据存储

(4)“配置信息”数据流：外部实体之间没有加工处理，存在直接数据流



2.3

高质量数据流图设计时应该考虑的三个原则：

(1)复杂性最小化原则。DFD分层结构就是把信息划分为小的且相对独立的一大批子集，这样就可以单独考查每一个DFD。如果想要了解某一个过程更加详细的信息，可以进入过程的下一层；如果想知道一个DFD如何与其他DFD相关联，可以跳转到上一层进行考查。

(2)接口最小化原则。在设计模型时，应使得模型中各个元素之间的接口数或连接数最小化。

(3)数据流一致性原则。一个过程和它的过程分解在数据流内容中是否有差别？是否加工只有输入流没有输出流？或者加工只有输出流没有输入流？



#### 第四题

4.1

软件架构风格是描述某一类特定应用领域中软件系统组织方式和惯用模式。

面向对象架构风格的特征：将数据表示和基本操作封装在对象中。这种模式的构件是对象，对象维护自身的完整性，对象之间通过消息机制进行通信，通过对象之间的协作完成计算过程。

控制环路架构风格：将过程输出的指定属性维护在一个特定的参考值。通过收集实际和理想的过程状态信息，调整过程变量使得实际状态趋于理想状态。



4.2 结合题干分析

4.3 



## 2010年

第一次：53分

第二次：52分

### 综合知识

5.数据库设计分为用户需求分析、概念设计、逻辑设计和物理设计。

在数据库设计的**逻辑阶段**进行关系规范化



8.关系代数

R X S:表示等值连接，表示笛卡积，不去除重复的列。

R 蝴蝶 S：表示自然连接，会去除重复的列。

圆圈符号表示 where 过滤

pi符号表示 select 选择



14 15.网络系统生命周期分为5个阶段：需求规范、通信规范、逻辑网络设计、物理网络设计、实施阶段

逻辑网络阶段：根据需求规范和通信规范，实施资源分配和安全规划。



17.对运行系统评估的主要目的是评价信息系统在性能方面的表现，找出系统可能存在的性能瓶颈。

当系统性能降到基本水平时，需要查找影响性能的瓶颈并消除该瓶颈。



18.企业门户是一个信息技术平台，可以分为三种：

企业信息门户：访问数据时提供统一入口，实现收集、访问、管理无缝集成。

企业知识门户：提供一个知识平台，团队成员取得联系。

企业应用门户：提高企业的集中贸易能力、协同能力和信息管理能力的平台。



19.客户关系管理系统(CRM)将营销管理理念集成在软件上。

销售自动化是最基本的模块，营销自动化作为销售自动化的补充。

CRM和ERP会形成一定的闭环。



20.共享数据库为不同的应用程序提供统一的数据存储与格式定义，能够在一定程度上**缓解**数据语义不一致的问题，但无法完全解决问题。



21.远程过程调用一般基于同步方式；共享数据库、文件传输的集成方式在性能方面较差，系统不能保持及时数据同步；消息传递的集成方式能够保证数据的异步、立即、可靠传输。



22.项目范围说明书，范围定义的输入：

项目章程；项目范围管理计划；组织过程资产；需求分解

项目文档管理方案不属于范围定义的输入。



23.项目时间管理的过程包括：活动定义、活动排序、活动资源估算、活动历时估算、制定进度计划以及进度控制。通常使用WBS工作分解结构来进行活动定义。鱼骨图是发现“根本原因”的方法，通常用来进行因果分析。



26.

RUP 4+1 视图：逻辑视图、实现视图、进程视图、部署视图和用例视图

用例视图：分析人员和测试人员关心系统的行为

逻辑视图：最终用户关心的是系统的功能

实现视图：程序员

进程视图：系统集成人员关心的是系统的性能、可伸缩性、吞吐率

部署视图：系统工程师



29.环境集成机制：

数据集成：访问信息的统一的数据接口规范

界面集成：统一界面，统一操作

控制集成：支持开发活动之间的通信、切换、调度和协同工作



36.基于构件的开发方法中，逻辑构件模型描述抽象设计、用接口描述服务以及功能的交互、是系统设计蓝图。

物理构件模型描述技术实施、硬件分布、绑定网络和通信协议，了解系统性能、吞吐率等功能性属性。



38.对象管理组织(OMG)定义了4中构件标准。

实体构件：长期持久化，主要用于事务性行为，由容器管理持久化

加工构件：由容器管理持久化，但客户端没有可访问的主键

会话构件：不需要容器管理持久化，状态信息自己管理

服务构件：无状态的



39.分布式系统分为5个逻辑计算层：

表示层：实现用户界面

表示逻辑层：生成数据表示而必须进行的处理任务，如输入数据编辑等

应用逻辑层：支持业务的处理过程，数据计算和分析

数据处理层：存储和访问数据库，查询语句和存储过程

数据层：实际存储的业务数据



40.客户机/服务器系统开发时可以采用不同的分布式计算架构。

分布式表示架构：表示层和表示逻辑层在客户机，应用逻辑层、数据处理层和数据层仍在服务器

分布式数据架构：表示层、表示逻辑层、应用逻辑层在客户机，数据处理层和数据层在服务器

分布式数据和应用架构：表示层和表示逻辑层在客户机、应用逻辑层在应用服务器上，数据处理层和数据层在数据服务器上。



41.系统输入设计中，通过内部控制的方式验证输入数据的有效性。数据类型检查确保正确的数据类型，自检位对关键字进行校验位检查；域检查验证数据的合法取值范围；格式检查按照数据格式对输入数据格式。



44.一般在设计软件之初，会根据用户需求，确定多个候选架构，从中选择一个较优的架构。



45.软件架构设计包括：提出架构模型、产生架构设计和进行设计评审。



51.隐式调用架构风格比较适合根据外部事件进行处理和动作的场景。



54.领域专家的主要任务提供知识和约束



62.敏感点式是实现一个特定质量属性的关键特征，该特征为一个或多个软件构件所共有。权衡点会影响一个或多个属性，并对多个属性来说都是敏感点。



64.网络安全漏洞通常是指网络节点的系统软件或应用软件在逻辑上的缺陷。



### 案例分析

#### 第一题（架构风格）

1.1 软件架构风格是描述某一个特定应用软件系统的组织方式和惯用模式。组织方式描述的是系统构件的组织形式，惯用模式反映的是众多系统共有的结构和语义。

主程序-子程序架构风格，所有的计算构件作为子程序协作工作，主程序顺序地调用子程序，构件通过共享存储区交换数据。

管道-过滤架构风格，每个构件都有输入和输出，构件接收数据输入，经内部处理，然后产生输出数据。这里的构件称为过滤器，构件之间的连接件称为数据流传输的管道。



1.2 结合题干进行分析

1.3 填空内容时，可以去题干中摘抄相应的关键内容。



#### 第二题（数据库）

2.1 

集中式数据架构是一个处理器与它相关联的数据存储设备以及其他外围设备组成，它被物理地定义到单个位置。系统提供数据处理能力，用户可以在同样的站点上操作，也可以在地理位置隔开的其他站点上通过远程终端来操作。系统及其数据管理被中心站点集中控制。

分布式数据架构使用多个计算机系统上的多个局部数据库系统，数据可以在多个不同的局部数据库中进行传送，运行在多种不同的计算机上，支持多种不同操作系统。这些机器分布在不同的地理位置并通过多种通信网络连接在一起。企业数据可以分布在不同的计算机上，一个应用程序可以操作位于不同地理位置的机器的数据。

读写分离架构利用了数据库复制技术，将数据的读和写分布在不同的处理节点上，从而达到提高可用性和扩展性的目的。



2.2

CRSS的分布式数据库系统需要由多个局部数据库系统、多个热备份数据库系统和多个缓存系统组成。局部数据库系统负责数据的写入，多个热点备份数据库系统用以解决单点故障的问题，数据缓存负责为应用提供所读取的数据。

读取数据：应用访问缓存，如果命中则返回，否则从局部数据库系统中读取数据并将数据加载到缓存后返回。

添加数据：采用延迟加载策略，应用将数据直接写入局部数据库。

更改数据：应用更改局部数据库中的数据，将缓存中的数据标为失效。

删除数据：应用删除局部数据库中的数据，将缓存中的数据标为失效。



2.3

集中式数据架构通过向上扩展提升系统的可扩展性。具体的方式可以包括硬件扩容(增加CPU数、内存容量、磁盘数量)和硬件升级(更换为高端主机或高速磁盘)。

分布式数据架构可以通过向外扩展提升系统的可扩展性。具体实现发现包括数据复制、数据垂直切分或水平切分、缓存和全文搜索等。



#### 第四题（架构设计）

4.1

ESB的主要功能包括：

(1)应用程序位置的透明性

(2)传输协议转换

(3)消息格式转换

(4)消息路由

(5)消息增强

(6)安全支持

(7)监控和管理

采用ESB作为集成架构，能够实现灵活的部署结构，包括CS结构、P2P结构等。

待集成系统只需要和总线联系，彼此之间不需要互相通信，这样大大降低了系统的耦合程度。

在加入新的待集成系统时，只需要采用插件的方式实现传输协议和数据格式的适配即可，系统可扩展性强。



4.2 

具体需求具体分析

系统运行平台和语言差异大的可以采用数据共享服务，即面向对象服务的方式，将工具的功能包装成服务，实现跨平台跨语言。

通信协议、数据格式不统一可以采用基于消息总线的方式，进行数据适配等





4.3

在实现工具之间数据格式灵活转换时，可以采用适配器设计模式。

首先定义一个统一的数据转换接口类，实际转换类需要继承数据转换接口类，并实现接口转换类定义的功能，实际转换类可以定义不同的数据转换格式。



## 2011年

第一次：56分

第二次：51分

### 综合知识

1.操作系统为用户提供了两类接口：操作一级的接口和程序控制一级的接口。操作一级的接口包括操作控制命令、菜单命令、窗口等；程序控制一级的接口包括系统调用



9.CISC(复杂指令集计算机)的指令系统复杂，难以用硬布线逻辑电路实现控制器，通常采用微程序控制。

RISC (精简指令集计算机)适合采用硬线控制逻辑



21.当需要集成并灵活定义系统功能之间的协作关系时，应该采用基于**工作流**的功能关系定义方式



23.**软件评审**是软件质量保证的主要活动之一



28.RUP，三个特点：迭代、用例驱动、架构设计。四个过程：初始（定义视图、模型、系统范围）、细化（确定体系结构、制定计划、资源要求）、构造（构造产品演进需求至产品提交）、移交（把产品交给用户）



37.企业信息化建设的核心和本质是企业运用信息技术，进行知识的挖掘，对业务流程进行管理。



39.外部设计功能和接口，内部设计细化外部设计。



49.ABSD三个基础：功能分解、选择架构风格实现质量以及商业需求、软件模板的使用



61.ATAM是一种常用的软件架构评估方法，该方法强调对软件的质量属性进行分析、分类和优先级排序等工作。



64.Snmpv 3，主要威胁：一修改信息，二假冒。次要威胁，一修改报文流，二信息泄露。



65.PGP用来实现安全电子邮件的协议。



### 案例分析

#### 第一题（质量属性）



#### 第二题（数据库）

数据库规范化和反规范化



#### 第四题（web)

4.1、4.2结合题干进行分析回答

4.3

REST从资源的角度定义网络系统结构的，分布在各处的资源由统一资源标识符(URI)确定，客户端程序通过URI获取资源的表现，并且通过获得资源表现使得其状态发生改变。

REST中将资源、资源的表现和获取资源的动作三者进行分离。



## 2012年 

第一次：50分

第二次：48分

### 综合知识

9.软件中间件可以提高开发效率，可以降低应用软件设计的复杂度。



13.TCP采用可变大小的滑动窗口协议进行流量控制。在向前纠错系统中，当接收端检测到错误后就根据纠错编码的规律自行纠错；在向后纠错系统中，接收方会请求发送方重发出错分组。IP协议不预先建立虚电路。



15.SAN主要采取数据块的方式进行数据和信息的存储，目前主要使用以太网(IPSAN)和光纤通道(FCSAN)两类环境中。



16.对于采用过程调用风格，将显示调用策略替换为隐式调用策略能够提高系统的灵活性，但会降低系统的性能。



19.CRM将人力资源、业务流程与专业技术进行有效整合。四个主要模块：销售自动化、营销自动化、客户服务与支持、商业智能。



21.企业信息化方法包括：业务流程重组、核心业务应用、信息系统建设、资源管理和人力资本投资方法。



22.企业信息资源集成前提是对企业**信息功能**的集成，核心是对企业**内部和外部信息流**的集成



28.UML利用用例及用例图表示需求，利用包图及类图表示目标软件系统的总体架构。



29.快速应用开发(RAD)基于**构件**的开发方法



31.形式化方法需要很强的数学功底，应用于安全性较高的系统开发。



34.软件开发环境，根据功能，可以划分为环境信息库、过程控制与消息服务器、环境用户界面。



39.ANSI/IEEE 1471-2000，**视图**主要描述软件架构模型，**视角**描述相关利益人所关注的架构模型，**架构**是对所有利益相关人关注点的响应和回答。



64.在PKI系统体系中，**证书机构CA**负责生成和签署数字证书，**注册机构RA**负责验证申请数字证书用户身份。



66.不同种类的商品可以使用相同或类似的商标，但是不能在任何商品中使用与驰名商标相同或类似的商标。



68.我国标准分为

国家标准(GB，GB/T)、行业标准(QJ航天、SJ电子、JB机械、JR金融、HB航空)、

地方标准(DB)、企业标准(Q)



### 案例分析

#### 第一题(架构风格)

1.1 

架构风格是描述软件系统的一种组织方式和惯用模式。组织方式描述的是系统构件的组织形式，惯用模式反映的是众多系统中共有的结构和语义。

(1)从集成开发环境与用户的交互来看，...（结合材料）。采用以数据存储为中心的架构风格能够很好地支持交互数据处理，而管道过滤架构风格则对用户的交互式数据处理有限。

(2)从集成开发环境的扩展性来看，...（结合材料）。在这种情况下，采用以数据存储为中心的架构风格，以数据格式解耦各种功能之间的依赖关系，也可以灵活定义功能之间的逻辑顺序。管道-过滤风格同样以数据格式解耦数据处理过程之间的依赖关系，但其在数据处理逻辑关系的灵活定义方面较差。

(3)从集成开发环境的数据管理来看，...（结合材料）。以数据存储为中心的架构将数据存储在统一的中心存储器中，中心存储能够表示多种数据格式，并能够为数据格式转换提供各种支持。管道-过滤器架构风格只能支持有限度的数据格式，并且在数据格式转换方面的灵活性较差。



1.2 

(2)适合采用解释器的架构风格。具体：1.为...定义某种语言，并描述其语法与语义2.编写解释器对该语言进行解释 3.生成对应的脚本语言程序

(3)适合采用隐式调用的架构风格。具体，定义...这一事件，实现...定位函数。集成开发环境维护一个事件注册表结构，将事件与定位函数关联起来形成注册表中的一个记录项。在调试过程中，集成开发环境负责监听各种事件，当事件发生时，集成开发环境查找事件注册表，找到定位函数，从而实现...。



#### 第四题（设计模式）

4.1

创建型模式主要用于创建对象，为设计类实例化新对象提供指南。

结构型模式主要用于处理类或对象的组合，对类如何设计以形成更大的结构提供指南。

行为型模式主要用于描述类或对象的交互以及职责的分配，对类之间交互以及分配责任的方式提供指南。



4.2

创建型：原型模式、构造模式

结构型：外观模式、代理模式、适配器模式

行为型：中介模式、命令模式、状态模式、策略模式



4.3 

(1)策略模式

(2)适配器模式



#### 第五题（数据库）





## 2013年

第一次：54分

第二次：48分

### 综合知识

1.逻辑页=页号+页内地址，高位代表页号、低位代表页内地址。



22.企业内部的信息集成：技术平台集成、数据集成、应用系统集成和业务过程集成。

应用系统集成实现不同应用系统互操作，数据和方法共享。业务过程集成实现系统之间的连接、协调和信息共享。



28.遗留系统的演化四种策略：

淘汰：技术含量低、业务含量低

继承：技术含量低，业务含量高

集成：技术含量高，业务含量低

改造：技术含量高，业务含量高



64.Kerberos可以防止偷听和重放攻击，时间戳可以防止重放攻击。第三方认证服务的两种体制分别是Kerberos和PKI。



### 案例分析

#### 第一题（架构设计）

1.2、企业服务总线ESB是传统中间件技术与XML、Web服务等技术相结合的产物，主要支持异构系统集成。ESB基于内容的路由和过滤，具备复杂数据的传输能力，并可以提供一系列的标准接口。

ESB的主要功能：

(1)服务位置透明性

(2)传输协议转换

(3)消息格式转换

(4)消息路由

(5)消息增强

(6)安全性

(7)监控与管理



#### 第四题（设计模式）

4.1

MVC的作用：

(1)易于扩展，视图的变更与模型无关

(2)易于维护，控制器和视图随着模型的扩展而扩展，只要保持公共接口，旧版本依旧可以使用

(3)可支持功能强大的用户界面



4.2

从设计模式的角度来说，整个XML表现层解析的机制是一种策略模式。在调用显示GUI时，不是直接调用特定的表现技术的API，而是对应的XML文件，根据解析器解析XML，得到GUI视图实例对象，这样GUI开发人员来说，只需要维护一套XML文件即可。



## 2014 年（第一次：52分）

### 综合知识

16.评测程度依次降低：真实程序、核心程序、小型基准程序和合成基准程序。TPC-C是在线事务处理的基准程序，TPC-D是决策支持的基准程序。



19.ERP：物流、资金流和信息流的管理系统。

五个层次生产计划：

生产预测计划：对市场需求进行比较准确地预测

销售管理计划：对销售部门的相关业务进行管理

生产计划大纲：根据经营计划的生产目标制定

主生产计划：一定时期内生产什么，生产多少

物料需求计划：采购

能力需求计划：认识企业生产能力的瓶颈



23.集成平台基本功能中，信息集成服务实现不同数据库系统之间的数据交换、互操作、分布管理和共享信息模型；应用集成服务能够为应用提供数据交换和访问操作，是各种不同的系统能够相互协作。



26.JRP的主要意图是收集需求，而不是对需求进行分析和验证。



39.单元测试也称为模块测试，测试一个模块时，需要为该模块编写一个驱动模块和若干个桩模块。

驱动模块用来调用被测模块，桩模块用来模拟被测模块所调用的子模块。

自顶向下的单元测试先测试上层模块，再测试下层模块。测试下层模块时由于它的上层模块已测试过，所以不必另外编写驱动模块。

自底向上，测试上层模块时由于它的下层模块已经测试过，所以不必另外编写桩模块。



66.软件商标权的保护对象是软件注册商标



### 案例分析

#### 第一题（架构风格）

1.1 MVC架构风格最初是用来构建用户界面时采用的架构风格。M表示模型，用来处理数据逻辑部分，V表示视图，用来处理数据展示部分，C表示控制器，用来处理用户交互部分。



1.2 题干中找答案



#### 第二题（数据流图）

2.1 

外部实体：指存在于软件系统外的人员或组织

加工：输入数据流到输出数据流之间的转换

数据流：由一组固定成分的数据组成，表示数据的流向

数据存储：表示暂时存储的数据



#### 第四题（质量属性）





## 2015年（第一次：53分）

### 综合知识

13.RAID5适用于大数据量的操作，也适用于各种事务处理。当有N块阵列盘时，用户空间为N-1块盘容量。并且按较小的盘的容量为计算方式。



15.IPV6的长度是128比特。IPV6数据包的首部比IPV4简单。IPV6的地址分为单播、任意播和组播三种。IPV6被分配到接口，而不是分配给结点，所以每个主机拥有唯一的IPv6地址是错误的。



16.采用面向对象架构风格，可以通过引入对象管理层提高系统性能。



21.电子商务的实体有4类：客户、商户、银行以及认证中心。



25.

产品范围定义是信息系统要求的度量，产品范围是项目范围的基础，而项目范围的定义是生产项目计划的基础。

产品范围的描述是项目范围说明书的重要组成部分。

项目范围定义的输入包括以下内容：

1.项目章程

2.项目范围管理计划

3.组织过程资产

4.批准的变更申请



26.配置管理中，配置项的状态有3种：草稿、正式发布和正在修改。



30.数据加工是数据流图，而不是程序流程图。



34.

RUP分解为4个顺序阶段：初始阶段、细化阶段、构建阶段和移交阶段。

每个阶段结束都要安排一次技术评审，是一个迭代和增量的过程。

4个阶段就是一个开发周期，每次经过这4个阶段就会产生一代软件。但每一次的侧重点都放在不同的阶段上。

好处：软件开发的早期就可以对关键的、影响大的风险进行处理。

RUP 4+1 视图：逻辑视图、实现视图、进程视图、部署视图和用例视图

用例视图：分析人员和测试人员关心系统的行为

逻辑视图：最终用户关心的是系统的功能

实现视图：程序员

进程视图：系统集成人员关心的是系统的性能、可伸缩性、吞吐率

部署视图：系统工程师

RUP，三个特点：迭代、用例驱动、架构设计。四个过程：初始（定义视图、模型、系统范围）、细化（确定体系结构、制定计划、资源要求）、构造（构造产品演进需求至产品提交）、移交（把产品交给用户）



36.

面向对象设计原则：

单一原则：类完成的单一功能

里氏替换：不要破坏父类的结构

依赖倒置：抽象不应当依赖于细节，细节应当依赖于抽象，针对接口编程。

接口隔离：接口分类要精简，最少知道原则。

迪米特法则：降低耦合

开闭选择：遵循前5大原则



39.

单元测试：详细设计

集成测试：概要设计

系统测试：需求或开发合同

验收测试：软件需求规格说明书



65.将原件出售时不涉及著作权。



### 案例分析

#### 第一题（质量属性）



#### 第二题（UML）

2.1、

状态图是对类的补充，用来描述此类对象所具有的状态，以及某些事件发生时其状态的转移情况。

活动图是一种特殊的状态图，用来描述一个操作中要进行的各项活动的执行流程，同时也常用来描述一个用例的处理流程或者某种交互流程。

两者的区别：状态图侧重描述行为的结果，而活动图侧重描述行为的动作。其次活动图可描述并发行为，而状态图不能。



2.2 (1)垂直起飞状态 (2)飞机异常 (3)保持状态 (4)垂直升降状态 (5)无线电遥控飞行状态



2.3

(1)地面综合控制计算机 (2)准备起飞 (3)垂直起飞 (4)保持高度飞行 (5)发送目标高度信息 (6)下降到目标高度

(7)发送飞行任务结束指令 (8)飞机降落 (9)转入无线电遥控飞行状态 



#### 第四题（数据库）





## 2016年（第一次：55分）

### 综合知识

4.时间=第1条指令总和 + (n-1)*最耗时的步骤。吞吐率=指令数/时间



5.双缓冲区的工作特点时实现对缓冲区种的输入T、提取M以及与CPU计算C三者并行工作。简单来说就是可以并行执行，时间的话就取最长的那个。因为M+C<T，所以前面10块输入一共使用了100us（并行计算，M+C的时间不算了），加上最后一块的M+C处理时间。10*10+6+2=108

双缓冲区先将数据输入到缓冲区1，装满后便转向缓冲区2。

单缓冲区只有一个缓冲区，流水线处理方式，有两个阶段，T+M和C，所以计算为(10+6)*10+2=162



8.逻辑块号从0开始。



13.区分服务种IPv4根据服务类型，IPv6根据通信类型。



14.IPv6无状态自动配置过程中，主机将其**MAC**地址附加在地址前缀1111111010之后，产生一个链路本地地址。



15.

直连路由管理距离为0，静态路由管理距离为1

路由管理距离小于外部BGP(20)的路由信息是比较可靠的。



22.项目的成本管理中，**成本预算**将总的成本估算分配到各项活动和工作包上，来建立一个成本的基线。



23.项目时间管理中的过程包括活动定义、活动排序、活动的资源估算、活动历时估算、制定进度计划以及进度控制。



26.螺旋模型在快速模型的基础上扩展而成。最大的特点是引入了风险分析。适合大型的昂贵的系统级的软件应用。



27.开放式源码开发方法适用于程序开发人员在地域上分布很广的开发团队。功用驱动开发方法致力于短时的迭代，阶段和可见可用的功能，开发人员分为首席程序员和类程序员。



29.版本控制工具属于软件维护工具，软件评价工具属于软件管理和软件支持工具。



31.面向对象设计的基本任务，把面向对象分析模型转换为面向对象设计模型。

面向对象分析模型主要由**顶层架构图**、用例于用例图、领域概念模型构成。设计模型则包含以**包图**表示的软件体系结构图、以交互图表示的**用例实现图**、完整精确的类图、针对复杂对象的状态图和描述流程化处理过程的**活动图**等。



35.面向构件的编程需要下列基本的支持：多态性(可替代性)、模块封装性(高层次的信息隐藏)、后期绑定和装载(部署独立性)和安全性(类型和模块安全性)。**多模后安**



38.软件构建是部署、版本控制和替换的基本单位。是一组通常需要同时部署的原子构件。原子构件通常成组部署，但是也能够单独部署。大多数原子构件都属于一个构件家族。一个模块是不带单独资源的原子构件。



39.基于Web Services实现的面向服务系统中，服务提供者、服务使用者和服务注册器之间的远程交互通过**SOAP**（简单对象访问协议）消息实现，服务内容描述通过WSDL（web服务描述语言）标准实现，服务注册信息通过UDDI（服务同一描述、发现和集成）框架实现，通过**BPEL**（业务过程执行语言）将分散的、功能单一的web服务组织成一个复杂的有机应用。



42.软件集成测试也称为组装测试、联合测试。它将已通过单元测试的模块集成在一起，主要测试模块之间的协作性。从组装策略而言，可以分为**一次性组装测试**和**增量式组装**(包括自顶向下、自底向上及混合)。集成测试在软件概要设计阶段完成，一般采用黑盒测试方法。



47.可修改性指能够快速地以较高的性能价格比对系统进行变更的能力。包括可维护性、可扩展性、可移植性和结构重组。



64.DES的密钥长度为56位，三重DES的密钥长度为112。



65.流量分析属于被动攻击方式。



66.软件著作权只保护作品表达，不保护作品的思想、原理等。所以软件著作权不保护思想、处理过程、操作方法和数学概念等。



### 案例分析

#### 第一题（质量属性架构风格）

1.1、(1)f (2)性能 (3)d (4)g (5)b



1.3 (1)模型/数据库 (2)编辑器 (3)转化器 (4)模拟器



#### 第二题（UML建模）

2.1、参与者：管理员、学生、教师、时间、打印机



2.2、三种：包含、扩展、泛化。包含关系，注册课程必须要先登录系统。扩展



2.3、依赖、关联、组合、聚合、泛化。聚合、组合、关联



#### 第四题（web架构）

4.1、基于Web服务器的脚本语言解决方案，实质是web服务器端放入一个通用的脚本语言解释器，负责脚本语言的解释执行。不足：

1.脚本语言嵌入到HTML中，是的I/O、业务逻辑、数据处理等程序代码混杂在一起，使得开发和维护困难

2.使用web服务器实现业务逻辑，系统扩展性差，并发能力差

3.系统缺乏有效的维护、管理工具



4.2

应用服务器是指通过各种协议把商业逻辑暴露给客户端的程序。它提供了访问商业逻辑的途径。

应用服务器通过分布式体系来保障系统在大负荷和长时间运行下的稳定性以及可扩展性：

(1)当系统处理能力不够时，可以通过简单增加服务器的方式，提高水平可扩展性

(2)可以动态调整不同主机之间的负载，最大限度地利用资源，提供单机稳定性

(3)动态调整主机工作职能，没有单点故障。



## 2017年（第一次：53分）

### 综合知识

2.流水线加速比=不用流水线的执行时间/使用流水线的执行时间



12.分布式数据库两阶段提交协议，两个阶段：准备阶段(表决阶段)和提交阶段(执行阶段)



13.S/MIME可提供安全电子邮件服务



14.网络逻辑结构设计不包括用户培训计划，用户培训计划属于物理网络设计的内容。



15.子网和超网的作用是层次化路由选择。



18.管理信息系统规划的方法很多：

关键成功因素法：通过对关键成功因素的识别...

战略目标集转化法：组织的战略目标转变为管理信息系统的战略目标

企业系统规划法：自上而下地识别企业目标...，自下而上地设计信息系统



20.信息化需求包括三个层次：战略需求、运作需求和技术需求。战略需求提升组织的竞争能力，运作需求实现信息化战略目标的需求、运营策略、人才培养。技术需求系统开发之类的...



26.软件过程：软件描述、软件开发、软件有效性验证、软件进化。



29.软件工具分为软件开发工具、软件维护工具、软件管理工具和软件支持工具。

软件开发工具：需求分析工具、设计工具、编码与排错工具。



30.SCCS是元老级的版本控制如那件



35.构件利用工厂方法(如构造函数)来创建自己的实例



36.接口标准化是对接口中的信息的格式、模式和协议的标准化



37.接口描述是IDL文件中最核心的内容。



41.移植工作大体上分为：计划阶段、准备阶段、转换阶段、测试阶段、验证阶段。

在计划阶段确定移植方法。



66.著作权规定，美术作品著作权不由原件的转移而转移，原件卖出，原作者仍有该画的著作权，原件持有人仅有所有权与展览权。



67.相同商标注册遵循的原则是谁先申请谁拥有，同时(同一天)申请则看谁先使用，如果无法判断可以通过协商来确定归属，协商不成可抽签决定结果。





### 案例分析 

#### 第一题（质量属性）

1.1、(a) (b)安全性 (c)性能 (d) 敏感点 (e) (f)权衡点 (g)可用性 (h)性能 (i)可修改性 (j)可用性 (k)性能 (l) (m)可修改性 (n)风险点 (o)可测试性

(1)安全性 (2)可修改性 (3)h (4)l (5)j (6)m



1.2

架构风险是指架构设计中的潜在的、存在问题的架构决策所带来的隐患。n是风险点。

敏感点是为了实现某个特定的质量属性，一个或多个构件所共有的特征。d是敏感点。

权衡点是影响多个质量属性的特性，是多个质量属性的敏感点。f是权衡点。

#### 第二题（web架构）

2.1、MVC



2.2、EJB中的Bean分三种类型：Session Bean、Entity Beans和Message-Driven Bean。

Sesssion Bean：维护一个短暂的会话。

Entity Beans：维护一行持久稳固的数据

Message-Driven Bean：异步接受消息



#### 第四题（数据库）

4.1、数据库程序在线访问方式

优点：1.性能比ORM好 2.可以处理复杂查询语句 

缺点：1.要求程序员懂SQL 2.修改和维护相对困难

ORM

优点：1.大大降低学习和开发成本

2.程序员不再写SQL来进行数据库操作

3.减少程序的代码量

4.降低由于SQL代码质量差而带来的影响

缺点：

1.不太容易处理复杂查询语句

2.性能比直接使用SQL差



4.2、

增加数据访问层的原因：

(1) 由于涉及到多种异构数据库平台，数据访问的复杂性增加，不宜与业务逻辑混合在一起

(2) 数据管理变复杂后，需要使用的代码量增加，分单独层次有利于让逻辑更清晰

(3) 业务逻辑应以相同的方式访问异构数据库，单独的数据访问层屏蔽了差异性。



4.3、

工厂模式分抽象工厂与工厂方法，题目的场景适合采用抽象工厂设计模式。

抽象工厂设计模式提供一个接口，可以创建一系列相关或相互依赖的对象，而无需指定他们具体的类。优点是可以非常方便创建一系列的对象，应用场景也是创建系列对象的情况。



## 2018年（第一次：53分）

### 综合知识

9.DSP采用哈佛结构。哈佛结构：数据程序分开。冯诺依曼：数据程序在一块。GPU：冯升级版。



12.CPU的主频 = 倍频 * 外频



14.正向解析和反向解析都是dns负责。

正向解析：域名到ip地址

反向解析：ip地址到域名，可以通过PTR记录。



24.需求管理过程主要包括变更控制、版本控制、需求跟踪和需求状态跟踪。



25.变更控制委员可以由一个小组担任，也可以由多个不同的组担任。



31.图与开发阶段的对应关系

需求分析阶段：数据流图

概要设计阶段：模块结构图、层次图、HIPO图

详细设计阶段：程序流程图、伪代码、盒图



32.软件设计包括体系结构设计、接口设计、数据设计和过程设计。

结构设计：定义软件系统各主要部件之间的关系。

数据设计：将模型转换成数据结构的定义。好的数据设计将改善程序结构和模块划分，降低过程复杂性。

接口设计(人机界面设计)：与人如何通信

过程设计：结构部件转换成软件的过程描述



39.构件组成软件系统的过程：定制、集成和扩展。



42.动态测试：边界值分析、逻辑覆盖、基本路径

静态测试：桌面检查、代码审查、代码走查



49.在仓库风格中，有两种不同的构件：**中央数据结构**说明当前状态，**独立构件**在中央数据存储上执行。



64.消息摘要是用来保证数据完整性的。生成摘要的目的是为防止发送的消息被篡改。对摘要进行加密的目的是防止抵赖。





### 案例分析

#### 第一题（C/S架构）

4.2 (1)ab (2)cdf (3)eg (4)h



#### 第二题（数据流图）

2.1、

E1:房主 E2:租赁者 

P1:登记房主信息     P2: 登记房屋信息    P3:登记租赁者信息      P4:查询待租房屋信息     P5: 安排看房    P6:变更房屋状态

D1: 房主信息文件    D2:租赁者信息文件     D3:房屋信息文件     D4: 看房记录文件   



2.2、ERD实体关系图，三个部分：实体、关系、属性。



2.3、

实体用于数据建模，而类用于面向对象建模。实体只有属性，而类有属性和操作。

Essential Use Cases可翻译为抽象用例，Real Use Cases可翻译为基础用例。区别在于基础用例是与用户需求有对应关系的用例，是从用户需求中获取到的。抽象用例是从基础用例中抽取的用例的公共部分，是为了避免重复工作。



#### 第四题（Redis）



#### 第五题（SOA服务与ESB）

5.3、实现信息系统安全保障的措施：

1.引入https协议或采用加密技术对数据先加密再传输

2.采用信息摘要技术对重要信息进行完整性验证

3.交易类敏感信息采用数字签名机制



## 2019年（第一次：55分）

### 综合知识

2和3.逻辑地址伪十六进制5148H，页号为5，页内地址为148H，查找页表所对应的物理号，比如3，则物理地址的十六进制为3148H。先淘汰最近未访问的页面，如果都有访问则淘汰未修改的页面。



5.存储过程是数据库所提供的一种数据库对象，通过存储过程定义一段代码，提供给应用程序调用来执行。从安全性的角度考虑，更新数据时，通过提供存储过程让第三方调用，将需要的数据传入存储过程，而存储过程内部用代码分别对需要的多个表进行更新，从而避免了向第三方提供系统的表结构，保证了系统的数据安全。



8.分布式数据库再各节点上独立，在全局上统一。因此需要定义全局的逻辑结构，称为全局概念模式，全局外模式是全局概念模式的子集。分片模式和分布模式分别描述数据在逻辑上的分片方式和在物理上各结点的分布形式。



12.混成系统一般由离散分离组件和连续组件并行或串行组成，组件之间的行为由计算机模型进行控制。



15.DHCP是一个局域网的网络协议，指的是由服务器控制一段IP地址范围，客户机登录服务器时就可以自动获得服务器分配的IP地址和子网掩码。默认情况下，DHCP作为Windows Server的一个服务组件不会被系统自动安装，还需要管理员手动安装并进行必要的配置。

在一个园区网中可以存在多台DHCP服务器。



17.评测准确度最高的评价程序是**真实程序**，用的最多最频繁的是**核心程序**



18.关键成功因素法通过对关键成功因素的识别，找出实现目标所需要的关键信息集合，从而确定系统开发的**优先次序**。关键成功因素来源于组织的目标，通过组织的目标分解和关键成功因素识别、**性能指标**识别，一直到产生数据字典。



21.系统应用集成提供了4个不同层次的服务，从下至上依次为通信服务、信息传递与转化服务、应用连接服务，最上层服务是**流程控制服务**。



32.软件设计分为概要设计和详细设计。概要设计也称为高层设计或总体设计，即将软件需求转化为**数据结构**和软件的**系统结构**；详细设计也称为低层设计，即对结构图进行细化，得到详细的数据结构和算法。



34.通常将模块的结构和功能定义为其外部特性。



35.构件分类方法分为三大类：关键字分类法、刻面分类法、超文本方法。



36.构件组装技术：基于功能组装、基于数据组装技术和面向对象组装技术。



42.软件性能测试类型包括负载测试、强度测试和容量测试等。负载测试用于测试超负荷环境中程序是否能够承担；强度测试是考查系统极限运行情况；容量测试用于测试系统同时处理的在线最大用户数量。



66.署名权、修改权、保护作品完整权的保护期不受限制。



### 案例分析



## 2020年（第一次：54分）

### 综合知识

4.分时系统交互性强，实时系统交互性弱。



9.微内核的缺点：难以进行良好的整体性优化，进程间互相通信的开销大、内核功能代码不能被直接调用而带来服务的效率低。



14.DNS的配置文件保存在/etc/resolv.conf



15.交换机延迟比路由器小。



34.信息隐蔽可以提高软件的可修改行、可测试性和可移植性。



37.中间件基本功能：为客户端和服务器之间提供**连接和通信**；提供**交易管理机制**保证交易的一致性；提供应用的**负载均衡和高可用性**等。



42.脚本的基本结构主要有五种：**线性脚本**是录制手工测试的测试用例时得到的脚本；结构化脚本具有各种逻辑结构和函数调用功能；共享脚本是指一个脚本可以被多个测试用例使用；**数据驱动脚本**是指将测试输入存储在独立的数据文件中，而不是脚本中；关键字驱动脚本是数据驱动脚本的逻辑扩展，用测试文件描述测试用例。



44.展示功能组织的**静态视角**能判断质量特性，展示并发行为的**动态视角**能判断系统行为特性。



64.SYN Flooding是一种常见的DOS(拒绝服务)和DDOS(分布式拒绝服务)攻击方式。使用TCP协议缺陷，发送大量伪造的TCP连接请求，使得被攻击方的CPU或内存资源耗尽，最终导致被攻击方无法提供正常服务。



65.Kerberos系统中至少有三个角色：认真服务(AS)、客户端(Client)和普通服务器(Server)。客户端和服务器在AS的帮助下完成相互认证。客户端和服务器都有自己的密码，并且它们的密码只有自己和认真服务器AS知道。客户端在进行认证时，需要先向密钥分发中心来申请初始票据。

### 案例分析



## 2021年（第一次：48分）

### 综合知识

5.ER图的冲突包括三大类：属性冲突、命名冲突、结构冲突



15.SDN网络架构有三层：应用层、控制层、数据转发层。



18.企业数字化转型的五个发展阶段：初始级、单元级、流程级、网络级、生态级



24.需求工程包括需求开发和需求管理。

需求开发：需求获取、需求分析、需求定义、需求验证。

需求管理：变更控制、版本控制、需求跟踪、需求状态跟踪



26.软件生命周期分为软件定义、软件开发、软件运行、软件维护。



31.模块间相互依赖程度：数据耦合<控制耦合<特征耦合<公共环境耦合<内容耦合



34.环形复杂度 = 判定节点 + 1



37.COM支持两种对象组装：包含和聚集。包含是一个对象拥有指向另一个对象的唯一引用。聚集是直接把内部对象的接口引用传给外部对象的客户。







### 案例分析





# 论文写作

## 论文写作四部曲

1. 找准核心论点（5分钟）
2. 搭建论文框架（10分钟）
3. 撰写摘要（15分钟）
4. 正文写作（90分钟）



## 撰写摘要

![](D:\github\MyKnowledgeRepository\img\ruankao\论文\撰写摘要.png)



建议第三个模板，比较常规。

![](D:\github\MyKnowledgeRepository\img\ruankao\论文\摘要模板.png)



## 加分与扣分

![](D:\github\MyKnowledgeRepository\img\ruankao\论文\加分扣分准则.png)



## 论文模板

**摘要**

​	2019年4月，我参加国内某一线互联网大厂的直播数据中台项目的开发。该平台解决了集团下各个app等直播模块数据孤岛问题，通过数据中台统一服务的方式解决能力横向复用难、重复造轮子的问题，带来的收益是1.补齐了直播业务缺失的数据统计能力；2.统一维护，减少了维护成本；3.只要是接入中台的产品，能快速应用一套统计体系。我作为该项目的架构师和主要负责人，主要完成了需求获取分析、系统架构分析和设计等工作。通过团队一整年的努力，平台开发完成并顺利上线，整个系统已经稳定运行2年了，顺利达到了既定目标。本文作者结合实际经验，以该项目为例，讨论...**(主题)**，包括...**(过程、方法、措施)**。



**正文**

​	2019年以前，集团下的各个app都有直播模块，各app的直播是各团队自己迭代维护的，业务团队独立、研发团队独立、数据团队逻辑上也是独立。这带来了以下问题：1.能力横向复用难，重复造轮子问题。例如，一个功能、一套方法论，在某app端验证效果好，想要移植到另一个app，需要重新开发，这也带来了重复造轮子的问题。2.因为重复造轮子，也就造成了产品、研发、运营人力和成本的浪费。3.同时会造成对外品牌认知不统一，品牌效应难以拓展延申的问题。正是在这一背景下，集团提出建设直播数据中台，该项目既补齐了直播业务缺失的数据统计能力，比如，口径统一，对齐了各产品的数据口径，减少了沟通成本，同时统一了维护，减少了维护成本。只要是接入中台的产品，能快速应用一套统计体系。**（开头项目背景介绍）**

​	**回答问题二，介绍相关的技术点**

​	...

​	...

​	**结合项目实际情况进行分析**

​	...

​	...

​	经过我和团队的不懈努力，历时一年多，项目于2020年7月上线，整个系统运行稳定，达到了预期的目标和要求，提高了集团的业务处理的效率，创造了极大的价值。但是，在实施过程中也存在一些问题，由于数据中台里面存在很多大数据任务，如果大数据任务不分优先级同时在跑，那计算资源很快就会变得特别紧张，导致核心任务不能及时跑完，因此需要建立具有动态优先级调整机制的处理队列，让核心任务优先使用计算资源。我们也已经把这些经验和教训以文档的方式记录下来，供其他技术人员学习，为今后系统架构设计提供帮助。



## 自己的论文



### 架构风格

**摘要**

​	2019年4月，我参加国内某一线互联网大厂的直播数据中台项目的开发。该平台解决了集团下各个app等直播模块数据孤岛问题，通过数据中台统一服务的方式解决能力横向复用难、重复造轮子的问题，带来的收益是补齐了直播业务缺失的数据统计能力；减少了维护成本；接入中台的产品，能快速应用一套统计体系。我作为该项目的架构师，主要负责设计平台系统架构。本文作者结合实际经验，以该项目为例，讨论几种常用软件架构风格及特点，然后结合本次项目采用的数据流风格、虚拟机风格以及仓库风格，论述该项目在软件架构选择过程中，为何选择这三种风格组合，最后总结项目中所遇到的问题。通过团队一整年的努力，平台开发完成并顺利上线，整个系统已经稳定运行2年了，顺利达到了既定目标。



**正文**

​	2019年以前，集团下的各个app都有直播模块，各app的直播是各团队自己迭代维护的，业务团队独立、研发团队独立、数据团队逻辑上也是独立。这带来了以下问题：1.能力横向复用难，重复造轮子问题。例如，一个功能、一套方法论，在某app端验证效果好，想要移植到另一个app，需要重新开发，这也带来了重复造轮子的问题。2.因为重复造轮子，也就造成了产品、研发、运营人力和成本的浪费。3.同时会造成对外品牌认知不统一，品牌效应难以拓展延申的问题。正是在这一背景下，集团提出建设直播数据中台，该项目既补齐了直播业务缺失的数据统计能力，比如，口径统一，对齐了各产品的数据口径，减少了沟通成本，同时统一了维护，减少了维护成本。只要是接入中台的产品，能快速应用一套统计体系。

​	常见的五种架构风格有数据流风格、调用返回风格、独立构件风格、虚拟机风格以及仓库风格，接下来会对这五种架构进行具体介绍和分析。

​	数据流风格包括批处理序列架构风格和管道-过滤架构风格。1.批处理序列架构风格，组件是一系列固定顺序的计算单元，组件间只能通过数据传递交互。每个处理步骤是一个独立的程序，每一步必须在前一步结束后才开始，数据必须是完整的，以整体的方式传递。2.管道过滤风格中每一个构件都有一组输入和输出，构件读取输入的数据流，经内部处理，然后产生输出数据流。

​	调用返回风格包括层次架构架构风格、面向对象架构风格和主程序子程序架构风格。1.层次结构架构风格中，层次系统组织成一个层次结构。这个风格的特点是每层为上一层提供服务，使用下一层服务，只能见到与自己邻接的层。大的问题分解为若干个渐进的小问题，逐步解决，隐藏了很多复杂度。每修改一层，最多影响邻接层。上层必须知道下层的身份，不能调整层次间的顺序。2.面向对象风格是将数据的表示方法和对应的操作方法封装在一个对象中，对象和对象之间是通过函数和过程调用来交互。这种风格的构件就是对象，连接件就是函数和过程调用。这种结构风格中包含有封装、交互、多态、集成和重用等特征。 3.主程序子程序风格是单线程控制，把问题划分为若干个处理步骤，构件即为主程序和子程序。子程序通常可合成为模块，过程调用充当连接件，作为交互机制，调用关系就有层次性。

​	独立构件风格包括进程通信架构风格和事件驱动架构风格。1.进程通信架构风格中，构件是独立的进程，连接件是消息传递，这种风格的特点是构件通常是命名过程，消息传递的方式可以是点到点，异步和同步方式以及远程过程调用等。2.事件驱动架构风格中，构件不直接调用一个过程，而是触发或广播一个或多个事件，系统中其他构件中的过程在一个或多个事件中注册，当一个事件被触发，系统自动调用在这个事件中注册的所有过程。

​	虚拟机风格包括解释器风格和基于规则的系统架构风格。1.解释器架构风格中一个解释器通常包括完成解释工作的解释引擎，一个将被解释的代码的存储区，一个记录解释引擎当前工作状态的数据结构，以及一个记录源代码被解释执行的进度的数据结构。具有解释器风格的软件中含有一个虚拟机，可以仿真硬件的执行过程。2.基于规则的系统包括规则集、规则解释器、规则数据选择器及工作内存。

​	仓库风格包括数据库架构风格和黑板架构风格。1.数据库架构风格中构件主要有两大类，一个是中央共享数据源，保存当前系统的数据状态；另一个是多个独立处理元素，处理元素对数据元素进行操作。2.黑板架构风格包括知识源、黑板和控制3个部分。知识源包括若干个独立计算的不同单元，提供解决问题的知识，响应黑板上的变化。黑板是一个全局数据库，包含解域的全部状态，是知识源互相作用的唯一媒介。黑板通常应用在对于解决问题中没有确定性算法的系统中，例如语音识别、模式识别、图像处理以及知识推理等。

​	首先本次项目的用户使用界面采用的是B/S架构系统，直播数据中台还需要数据仓库提供相关业务指标数据，并采用微服务架构与多个app系统进行交互。在架构风格上，最终选择管道过滤器风格、分层架构风格、进程通信架构、基于规则的系统架构和数据库系统几个架构风格进行混合使用。下面讲述选择这几种架构风格的原因。

​	选择管道过滤器架构风格和进程通讯架构风格是因为中台涉及到直播数据指标需要由数据仓库提供，通过自建的ETL中间件每日从仓库中抽取数据，通过转换任务进行逻辑处理，每个转换都有一个输入流和输出流，许多转换任务一起构成了一个完整的数据处理流程。直播数据中台需要与不同的app系统的数据进行密切交互，涉及到异构系统之间的通信，业务模块通过远程调用其他服务和点到点异步消息通讯。

​	选择分层架构风格和数据库系统架构是因为用户使用平台时使用的是B/S架构，具有N层架构的特点，采用表示层、逻辑处理层和数据持久层的方式，每一层只为上一层提供服务，是典型的分层架构。数据持久层保存的数据、ETL抽取的数据以及Spark任务处理的数据都保存到Hive数据仓库中，逻辑层处理涉及的操作都与中央的数据仓库交互，完成对数据的读取、处理和存储等操作。

​	选择解释器的系统架构风格是由于大数据处理Spark经常要编写很长一段scala代码去处理数据，对大数据处理开发人员要求比较高，开发也比较难，因此平台推出sql化的标准统一服务。开发人员只需要写spark sql代码即可，由底层的相应模块去解释执行sql代码，翻译为相应的Spark RDD的任务去执行处理。这种解释器的系统架构风格大大提高了数据开发人员的效率，使数据开发人员更加专注于业务的处理，而不需要花费太多地精力去研究技术。

​	经过我和团队的不懈努力，历时一年多，项目于2020年7月上线，整个系统运行稳定，达到了预期的目标和要求，提高了集团的业务处理的效率，创造了极大的价值。但是，在实施过程中也存在一些问题，由于数据中台里面存在很多大数据任务，如果大数据任务不分优先级同时在跑，那计算资源很快就会变得特别紧张，导致核心任务不能及时跑完，因此需要建立具有动态优先级调整机制的处理队列，让核心任务优先使用计算资源。我们也已经把这些经验和教训以文档的方式记录下来，供其他技术人员学习，为今后系统架构设计提供帮助。



### 架构评估

**摘要**

​	2019年4月，我参加国内某一线互联网大厂的直播数据中台项目的开发。该平台解决了集团下各个app等直播模块数据孤岛问题，通过数据中台统一服务的方式解决能力横向复用难、重复造轮子的问题，带来的收益是补齐了直播业务缺失的数据统计能力；减少了维护成本；只要是接入中台的产品，能快速应用一套统计体系。我作为该项目的架构师和主要负责人，主要负责设计平台系统架构。本文作者结合实际经验，以该项目为例，讨论软件架构评估所普遍关注的质量属性并阐述其具体含义，然后详细本次软件架构评估采用的ATAM方法、实施过程，评估小组经过对系统中的风险点、敏感点、权衡点分析后生成质量效用树。通过团队一整年的努力，平台开发完成并顺利上线，整个系统已经稳定运行2年了，顺利达到了既定目标。



**正文**

​	2019年以前，集团下的各个app都有直播模块，各app的直播是各团队自己迭代维护的，业务团队独立、研发团队独立、数据团队逻辑上也是独立。这带来了以下问题：1.能力横向复用难，重复造轮子问题。例如，一个功能、一套方法论，在某app端验证效果好，想要移植到另一个app，需要重新开发，这也带来了重复造轮子的问题。2.因为重复造轮子，也就造成了产品、研发、运营人力和成本的浪费。3.同时会造成对外品牌认知不统一，品牌效应难以拓展延申的问题。正是在这一背景下，集团提出建设直播数据中台，该项目既补齐了直播业务缺失的数据统计能力，比如，口径统一，对齐了各产品的数据口径，减少了沟通成本，同时统一了维护，减少了维护成本。只要是接入中台的产品，能快速应用一套统计体系。

​	软件质量属性是软件架构设计时关注的一个重点，在软件架构评估中质量属性包括性能、可用性、安全性、可修改性、可靠性、可测试性、易用性等。其中前4个质量属性是质量效用树的重要组成部分。具体含义：

(1)性能是指系统响应能力，即系统多久才能对某个事件做出响应，或在某段时间内能处理事件的个数；

(2)可用性是指系统能正常运行的时间比例；

(3)安全性是指系统除了能够合法用户提供服务的同时还能阻止非授权用户使用的企图或拒绝服务的能力；

(4)可修改性是指能快速地并以较高性价比对系统进行变更的能力；

(5)可靠性是指软件系统在应用或错误面前，在意外或错误使用情况下维持系统的功能特性的基本能力。

(6)易用性是衡量一个用户使用软件产品完成指定任务的难易程度

​	常用的架构评估方法有基于调查问卷的评估方式、基于度量的评估方式、基于场景的评估方式。基于问卷调查的方式具有主观性不太适合本项目。基于度量的评估方式虽然评价比较客观，但需要评价者对系统架构有精确地了解，所以也不太适合本项目。基于场景的评估方式要求评估者对系统有中等了解，评价偏主观一点，但适用于本项目，故采取基于场景的评估方式。基于场景的评估方式又分为软件架构分析方法SAAM、架构权衡分析方法ATAM，成本效益方法CBAM。本项目根据不同的质量属性使用了架构权衡分析方法ATAM作为系统架构评估的方法。

​	在进行架构评估时，按照需求确定了评估参与者，评估小组有我的leader，leader+1，项目经理、开发人员、数据分析师、运营人员等组成。项目决策组成人员总要是leader、leader+1、集团中的首席架构师以及各方向的代表人员等。架构涉众包含开发人员、测试人员、运维人员等。架构评估经历了描述和介绍阶段、调查分析阶段、测试阶段和报告阶段等。下面我分别对这四个阶段进行介绍。

​	描述和介绍阶段，由于参与评估的人员有部分是对ATAM评估不了解的，我首先介绍了一下ATAM架构评估的方法和目的。leader和leader+1等人介绍项目的意义和动机。最后作为系统架构师的我描述整个系统的的架构实现，针对架构的各个组成部分进行功能及讲解，各个模块的服务是如何协作，整个系统的数据流向是怎样的，并且针对系统存在的问题进行安全规划。

​	在调查分析阶段，结合场景不同的角色的需求方，都基于各自立场提出了相关的需求，需求及质量场景如下：

(a)在正常网络负载情况下，平台在2S内响应用户操作请求。（性能）

(b)平台能够抵御99.999%的黑客攻击。（安全性）

(c)对查询请求处理时间的要求将影响系统的集群方式和数据处理过程设计。（敏感点）

(d)网络失效后，平台要在3分钟内发现并启用备用网络系统。（可用性）

(e)在平台升级时，要保证在1个月内添加一个新的消息处理中间件。（可修改性）

(f)信息安全部提出的更改平台加密的级别对安全性和性能产生影响。（权衡点）

(g)查询过程中，数据读取速度在30s完成。（性能）

(h)主站点断电后，需要在3秒内将请求重定向到备用站点。（可用性）

(i)更改用户使用界面接口必须在3天内完成。（可修改性）

(j)对主播用户信息数据的授权访问必须保证99.999%的安全性。（安全性）

(k)目前对“直播数据实时监控”业务逻辑的描述尚未达成共识，这可能导致部功能开发不明确，影响系统的可修改性。（风险点）

​	经过分析总结我们获得了质量属性效用树，属于性能的有a和g，可用性的有d和h，属于安全性的有b和j，属于可修改性的有e和i等。在这些场景的分析中还评估分析了系统的架构风险点、敏感点和权衡点。风险点是指架构设计中潜在的、存在问题的架构决策所带来的隐患，其中k描述的是架构风险。敏感点是为实现某个特定的质量属性，一个或多个构建具有的特性，其中c属于敏感点；权衡点是影响多个质量属性的特性，是多个质量属性的敏感点，其中f属于权衡点。

​	在测试阶段，结合直播的特殊性，经过项目干系人集体讨论，确定了不同场景的优先级：安全性、可用性最高，性能和可修改性其次，其他的属性最低。在平台安全性方面使用了SSL数字证书的https访问协议，网络设备使用了网闸、多层异构防火墙、入侵防护系统，数据访问使用分级授权和数据加密存储。可用性方面使用集团自建的云平台加心跳技术，当服务器出现问题时自动迁移到冗余主机。性能方面采用了中间件集群的方式，联机分析查询引擎使用Presto，它带来的查询效率远远大于Hive引擎和Spark引擎。可修改行方面平台对功能服务做了拆分，通过接口调用实现便捷修复。

​	报告阶段，经过架构评估，将评估的过程和结果都汇总整理成文档。其中包括架构分析方法文档、不同场景及各自的优先级，质量效用树、风险点、敏感点、权衡点的决策，每次评估会议的记录。

​	经过我和团队的不懈努力，历时一年多，项目于2020年7月上线，整个系统运行稳定，达到了预期的目标和要求，提高了集团的业务处理的效率，创造了极大的价值。但是，在实施过程中也存在一些问题，由于数据中台里面存在很多大数据任务，如果大数据任务不分优先级同时在跑，那计算资源很快就会变得特别紧张，导致核心任务不能及时跑完，因此需要建立具有动态优先级调整机制的处理队列，让核心任务优先使用计算资源。我们也已经把这些经验和教训以文档的方式记录下来，供其他技术人员学习，为今后系统架构设计提供帮助。



### 面向服务的架构

SOA的架构思想从来没有过时，SOA里面强调的可复用、解耦、灵活的组装编排，在我们工作、技术产品实现很多场景里面都会出现和应用。中台的架构思想，核心就是共性的业务能力的下沉。在共性的业务能力下层以后，我上层的前台的业务应用可以基于共性可复用的能力，去灵活的复用和组装，快速地实现上层应用。这个思想和SOA架构思想是一致的，这是第一点。第二个点，共性能力下沉以后我们怎样去建设共性能力，是不是像传统的方式就建设一个大的单体来实现这个共性能力？实际上不是的，我们最好的方式是把这个共性的能力再做拆分，拆分成一个个更小的组件来去实现这些能力，而这个正好就是微服务的架构思想。所以SOA、中台、微服务这些都是有通用的思想去复用。

中台 = SOA思想  + 微服务

![](https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fp1-tt.byteimg.com%2Forigin%2Fpgc-image%2Ff4d73047beaf464fad7bb32bbf9c26d6%3Ffrom%3Dpc&refer=http%3A%2F%2Fp1-tt.byteimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1669468977&t=247e52b61e3a8fbcb553f7a0fff6ec8b)



**摘要**

​	2019年4月，我参加国内某一线互联网大厂的直播数据中台项目的开发。该平台解决了集团下各个app等直播模块数据孤岛问题，通过数据中台统一服务的方式解决能力横向复用难、重复造轮子的问题，带来的收益是补齐了直播业务缺失的数据统计能力；减少了维护成本；只要是接入中台的产品，能快速应用一套统计体系。我作为该项目的架构师和主要负责人，主要完成了需求获取分析，架构分析和设计平台系统架构。本文作者结合实际经验，以该项目为例，讨论SOA技术框架的概念，包含的服务类型、主要技术和实现方式，然后详细阐述了如何基于SOA理念设计项目的服务架构。通过团队一整年的努力，平台开发完成并顺利上线，整个系统已经稳定运行2年了，顺利达到了既定目标。

​	

**正文**

​	2019年以前，集团下的各个app都有直播模块，各app的直播是各团队自己迭代维护的，业务团队独立、研发团队独立、数据团队逻辑上也是独立。这带来了以下问题：1.能力横向复用难，重复造轮子问题。例如，一个功能、一套方法论，在某app端验证效果好，想要移植到另一个app，需要重新开发，这也带来了重复造轮子的问题。2.因为重复造轮子，也就造成了产品、研发、运营人力和成本的浪费。3.同时会造成对外品牌认知不统一，品牌效应难以拓展延申的问题。正是在这一背景下，集团提出建设直播数据中台，该项目既补齐了直播业务缺失的数据统计能力，比如，口径统一，对齐了各产品的数据口径，减少了沟通成本，同时统一了维护，减少了维护成本。只要是接入中台的产品，能快速应用一套统计体系。

​	在架构设计之初我分析了将要开发的所有模块的特点。由于系统的组成模块较多，各个模块的开发语言、架构风格、执行标准等都可能有所不同，为保证各个模块之间以统一通用的方式进行交互，满足系统整体标准化、松耦合、粗粒度服务和可移植性等多方面因素后，我决定采用面向服务的架构设计来开发该系统。本文首先阐述SOA主要的技术和标准及每种技术和标准的具体内容，并论述如何使用面向服务架构开发系统，最后描述本次项目开发过程中构件面向服务架构时遇到了哪些问和解决方案以及个人感悟。

​	SOA是一个组件模型，它将应用程序的不同功能单元(称为服务)通过这些服务之间定义良好的接口联系起来。接口是采用中立的方式定义，独立于实现服务的硬件平台、操作系统和编程语言。这使得构建在各种这样的系统中的服务可以一种统一和通用的方式进行交互。与 SOA 紧密相关的技术主要有 UDDI、WSDL和SOAP。其中UDDI（统一描述、发现和集成）提供了一种服务发布、查找和定位的方法，是服务的注册规范，主要包含数据模型、API和注册服务三项内容；WSDL（服务描述语言）是对服务进行描述的语言，它有一套基于 XML 的语法定义，包含服务实现定义和服务接口定义；SOAP（简单对象访问协议）定义了服务请求者和服务提供者之间的消息传输规范。SOAP 用 XML 来格式化消息，用HTTP来承载消息。通过SOAP应用程序可以在网络中进行数据交换和远程过程调用。SOAP主要包括封装、编码规则、RPC和绑定四个部分。SOA主要的实现方式有WebService、ESB和服务注册表，本次在项目中使用的是WebService方式实现SOA。在该方式中包含三个重要角色，分别是服务提供者、服务请求者和服务注册中心，下面说明具体的构建过程及遇到的问题和实施效果。

​	服务提供者，主要完成服务的设计、描述、定义和发布工作。通过对业务的分析梳理，并综合考虑粗粒度、松耦合、自包含等特点对服务进行了设计。同时为了避免服务间通信量过大、交互频繁，尽量减少了服务的数量。经设计初步提炼出设备接入、消息处理、规则反馈和业务分析四个主要服务。其中设备接入服务与网关设备相接的服务，负责与网关设备进行消息交互；消息处理服务在网关设备接入服务和业务分析服务之间将输入的消息经过顺序处理和转换后产生输出流；规则反馈服务为使用频率较高的消息自动执行反馈及相应操作；业务分析服务负责系统管理、设备管理、网络组件管理、通知管理、规则管理、日志管理等。

​	服务注册中心，服务注册中心是连接服务提供者和服务请求者的纽带，服务提供者在此发布服务描述，服务请求者在此查找需要的服务。虽然在某些情况下服务注册中心是可选角色，但注册中心的存在可使服务提供者和服务消费者进一步解耦。本项目为了保证系统中各服务间松耦合和相互独立性，在架构设计中使用了该技术，注册中心内包含已发布的设备接入、消息处理、规则反馈和业务分析四项服务，其描述信息主要包括服务功能描述、参数描述、接口定义等相关内容。

​	服务请求者，服务的请求者即是服务的消费者，通过服务注册中心可查找、绑定和调用服务。系统中主要的流程是设备信息收集和业务结果反馈。数据中心管理系统利用服务注册中心获取对应的服务接口、参数和返回值实现动态绑定。在设备信息收集阶段，设备通过设备接入服务将消息发送到消息处理服务，消息经过格式转换后发送到规则反馈或业务分析。在业务结果反馈阶段，业务分析或规则反馈服务将处理结果通过消息处理后发送到设备。在服务调用期间请求者不需要关心服务提供者的业务处理和技术实现，只需关注自身业务，简化了开发流程提升了工作效率。

​	从本次项目开发整体来看，SOA架构的使用使模块间耦合度降低，提高了系统的性能，可用性和可修改性等多项指标，满足公司的预期要求，保证系统后期的快速二次开发和数据接入。但在系统开发过程中也遇到一些问题，由于SOAP是基于XML方式通信效率较低，当消息爆发式增长时，会造成大量的消息积压，无法得到及时解决，因为消息的反馈并没有严格的顺序要求，所以我选择增加路由灵活、容错能力好的消息中间件RabbitMQ和升级硬件组合方案来解决该问题。

​	经过我和团队的不懈努力，历时一年多，项目于2020年7月上线，整个系统运行稳定，达到了预期的目标和要求，提高了集团的业务处理的效率，创造了极大的价值。但是，在实施过程中也存在一些问题，由于数据中台里面存在很多大数据任务，如果大数据任务不分优先级同时在跑，那计算资源很快就会变得特别紧张，导致核心任务不能及时跑完，因此需要建立具有动态优先级调整机制的处理队列，让核心任务优先使用计算资源。我们也已经把这些经验和教训以文档的方式记录下来，供其他技术人员学习，为今后系统架构设计提供帮助。





​	

​	

​	




# 系统架构师

## 数据库

需求分析阶段要完成数据字典和数据流图



完整性约束：实体完整性约束（primary key）、参照完整性约束(foreign key)、自定义完整性约束(触发器)。



分解（）是无损连接，并保持函数依赖？



关系代数运算和表达式？

[关系代数运算和表达式](https://blog.csdn.net/qq_34246965/article/details/115960424)

自然连接表示两个关系表中有相同名称的属性(列)，则自动作为关联条件，会去除重复的列。

等值连接，取两者笛卡尔积中属性值相等的元组，不会去重重复的。

R X S:表示等值连接，表示笛卡积，不去除重复的列。

R 蝴蝶 S：表示自然连接，会去除重复的列。



数据库设计阶段分为四个阶段：

需求分析：需求说明文档、数据字典、数据流图

概念结构

逻辑结构

物理结构



嵌入式数据库系统，一般只提供本机服务接口，只为前端应用提供基本的数据支持。支持实时数据的管理，同时也支持多线程并发操作。



商业智能一般由数据仓库、联机分析处理、数据挖掘、数据备份和恢复等部分组成。



分布式数据库包括分片透明、复制透明、位置透明和逻辑透明

分片透明：用户不需要知道逻辑上访问的表具体是怎么分块存储的。

复制透明：不需要知道数据是复制到哪些节点

位置透明：不需要知道数据存放的物理位置

逻辑透明：不需要知道局部场地上使用的是哪种数据模型。



数据的转储分为静态转储和动态转储、海量转储和增量转储。

静态转储和动态转储：

1.静态转储不允许对数据库进行任何操作

2.动态转储允许对数据库进行操作，转储和事务可并发执行

海量转储和增量存储：

1.海量转储指每次转储全部数据

2.增量转储指每次只转储上次转储后更新过的数据



## 计算机网络

DAS(Direct-Attached Storage)：直连式存储系统，将存储设备连接到服务器上。也可以称SAS(Server-Attached Storage 服务器附加存储)，不带任何存储操作系统。

NAS(Network Attached Storage)：网络接入存储，将存储设备连接到现有网络上，可以直接联网，支持即插即用。不再通过I/O总线附属于某个特定的服务器，直接通过网络相连，用户通过网络访问。有自己的操作系统

SAN(Storage Area Network)：存储区域网络，是一种连接存储设备和存储管理子系统的专用网络。通过专用高速网将一个或多个网络存储设备和服务器连接起来的专用存储系统。采用数据块的方式进行数据和信息的存储。主要使用于以太网(IPSAN)和光纤通道(FCSAN)。



大型局域网划分为

核心层：高速转发通信、可靠性、性能、吞吐要求高，需要双机冗余热备份

汇聚层：网络访问策略控制、数据包处理、过滤、寻址

接入层：直接面向用户连接，负责一下用户管理的工作

![](D:\github\MyKnowledgeRepository\img\ruankao\网络设计.png)



**常见网络协议**

IEEE802.3/.2协议是数据链路层协议，局域网协议。

应用层协议：

FTP(文件传输协议)：运行在TCP上，21端口号传递控制信息，20端口号传递内容。

TFTP(简单文件传输协议)：建立在UDP上

HTTP(超文本传输协议)：建立在TCP上

DNS(域名解析)：使用UDP协议，端口号53



网络层协议：

IP、ICMP(网际控制报文协议)、IGMP(网际组管理协议)、ARP(地址解析协议)、RARP(反地址解析协议)

IP是无连接的、不可靠的

IP地址两部组成：网络号+主机号

A类地址：政府使用，1~126，规定以0开头的

B类地址：企业使用，128~191，规定以10开头

C类地址：普通老百姓使用，192~223，规定以110开头

D类地址：组播地址，以1110开头



为了避免IP地址的浪费，创造出了三级IP地址：网络号+子网号+主机号

子网号是从主机号当中借出来的。

子网和超网属于层次化地址编码。

![](D:\github\MyKnowledgeRepository\img\ruankao\子网和子网掩码.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\子网计算.png)

与运算：1&1=1，其他都是0。

例题中，前27位如果一样那就在同一网段，不一样就不再同一网段。

除2取余法



IPv6是一个或一组接口的标识符，是分配到接口，而不是分配给结点。

有三种类型：单播、组播、任意播

ip6无状态自动配置过程中，会将MAC地址附加在地址前缀11111111010之后，产生一个链路本地地址。

区分服务：ip4根据服务类型、ip6根据通信类型。



直连路由管理距离为0，静态路由管理距离为1

路由管理距离小于外部BGP(20)的路由信息是比较可靠的。



**网络互联设备**

![](D:\github\MyKnowledgeRepository\img\ruankao\网络互联设备.png)



**综合布线系统**

![](D:\github\MyKnowledgeRepository\img\ruankao\综合布线系统.png)

工作区子系统：连接插座的

水平子系统：同一楼层，一端连接插座，一端连接跳线架上。功能：将垂直的子系统延申到工作区，或者将用户区系统引至到管理子系统

管理子系统：管理水平和垂直系统的桥梁，同时为同一层组网提供条件

垂直(干线)子系统：

设备间子系统：

建筑间子系统：当前这个楼和其他的楼连接



IDS：入侵检测系统。根据操作行为特征或异常行径来判断。杀毒软件就用到入侵检测系统的原理，通过特征识别病毒。

防火墙：内外网之间的隔离。外网的请求要到内网，必须通过防火墙，它会使用一些规则判断一些恶意行为。但如果攻击来自内网，防火墙就无能为力了。

网闸：一个物理隔离装置。与IDS和防火墙不同，网闸连接的两个网络是不相通的。与内网相连时，会断开与外网的连接，与外网连接时，会断开与内网的连接。分时地与内外网连接，一个时刻只与一个网络连接，保持“物理的分离”。

UTM：一体化安全设备，具备防火墙、入侵检测和网关防病毒功能。



## 操作系统

**存储管理**

分页存储管理：将一个进程的空间地址划分成若干个大小不等的区域，称为页。相应的，将主存空间划分成与页相同大小的若干个物理块，称为块或页框。

![](D:\github\MyKnowledgeRepository\img\ruankao\分页管理.png)

页内地址占12位，页号占20位。

过程：页号通过页表找到对应的物理块号，把块号和块内地址拼接起来就是物理地址。页内地址等于块内地址

计算公式如上



## UNL

**类图：**

![](D:\github\MyKnowledgeRepository\img\ruankao\类图的关系.png)

依赖：是一种使用关系，我开车，就是一种使用关系。在方法中传入了参数

```java
public void drive(Car car){
    car.move();
}
```

关联关系：是一种拥有关系，它使一个类知道另一个类的属性和方法。一个类拥有了另一个类的成员变量

```java
public class person{
    Car car = new Car();
    car.move()
}
```

聚合关系：是关联关系的一种特例。空心菱形。has-a，整体与部分是可分离的。比如汽车发动机是汽车的组成部分，他们之间是可分离的，所以是聚合关系。

组合关系：也是关联关系的一种特例。实心菱形。contains-a，整体与部分是不可分离的。比如人和头、嘴巴是不可分离的，所以是组合关系。



## 设计模式

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\设计模式.png)



**工厂方法**

定义一个用于创建对象的接口，让子类决定将哪一个类实例化，使类的实例化延迟到子类。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\工厂方法模式.png)



**抽象工厂模式**

提供一个创建一系列相关的接口，无需指定他们具体的类。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\抽象工厂模式.png)



**建造者模式**

将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。

典型的kfc儿童套餐包括一个主食、一个辅食、一杯饮料和一个玩具。这些在套餐中可以使不同的，但是组合套餐的过程是相同的。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\建造者模式.png)



**原型模式**

拷贝原型创建对象

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\原型模式.png)



**单例模式**

保证一个类只有一个实例



**适配器模式**

将一个类的接口转换成客户希望的另外一个接口。使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。如：电源适配器

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\适配器模式.png)



**桥接模式**

将抽象部分与它的实现部分分离，使他们可以独立地变化。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\桥接模式.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\桥接模式1.png)



**组合模式**

将对象组合成树形结构。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\组合模式.png)



**装饰器模式**

动态地给一个对象添加一个额外的职责。比生成子类更为灵活

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\装饰器模式.png)



**外观模式**

为子系统一组接口提供一个一致的界面。

使用该模式提高了底层代码访问的一致性，但降低了服务端程序的调用性能。

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\外观模式.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\外观模式1.png)



**享元模式**

运用共享技术有效地复制大量的细粒度对象。

通过共享技术实现相同或相似对象的重用。



**代理模式**

使用代理对象完成用户的请求，屏蔽用户对真实对象的访问。

代理模式和适配器模式的区别：代理模式和被代理者的接口是同一个，适配器模式是接口不同。



**责任链模式**

让多个对象都有可能接收请求，将这些对象连接成一条链，并且沿着这条链传递请求，直到有对象处理它为止。



**解释器模式**

给定一个语言，定义它的文法，定义一个解释器，解释器解释该语言中的句子。



**模板方法模式**

定义一个操作中算法的骨架，将一些步骤延迟到子类中。



**命令模式**

发出命令的责任和执行命令的责任分割开。可撤销的操作



**迭代器模式**

提供一种方法顺序访问一个聚合对象中各个元素，而无须暴露该对象的内部表示。



**中介者模式**

用一个中介对象来封装一系列的对象交互

![](D:\github\MyKnowledgeRepository\img\ruankao\设计模式\中介者模式.png)



**备忘录模式**

在不破坏封装性的前提下，将对象恢复到原先保存的状态。



**观察者模式**

观察者模式定义了对象间的一种一对多依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新。



**状态模式**

对于对象内部的状态，允许其在不同的状态下，拥有不同的行为，对状态单独封装成类。



**策略模式**

定义了一系列算法，并将每个算法封装起来，使它们可以相互替换，让算法独立于它的客户而独立变化。



**访问者模式**

对于某个对象或一组对象，不同的访问者，产生的结果不同，执行的操作也不同。



## 架构设计

基于场景的架构分析方法（SAAM）

主要输入：问题描述、需求说明和架构描述

分析过程包括：场景开发、架构描述、单个场景评估、场景交互和总体评估



基于架构的软件设计(ABSD)
三个基础：对系统进行功能分解、采用**架构风格**实现质量属性与商业需求、采用软件模板设计软件结构。

强调采用**视角和视图**来描述软件架构，采用**用例和质量属性**场景来描述需求。用例描述的是功能需求，质量属性场景描述的是质量需求（非功能需求）



架构风格定义了一类架构所共有的特征，反映了领域中众多系统中所有的**结构和语义**两个方面的特征，包括：架构定义、架构词汇表和架构约束。



架构文档化的主要输出结果是：架构规格说明书和架构质量说明书



特定领域软件架构（DSSA）

以特定问题领域为对象，形成由领域参考模型、参考需求、**参考架构**等组成的开发基础架构。

基本活动：

1.领域分析：主要目的是获得**领域模型**

2.领域设计：主要目的是获得**特定领域软件架构**(DSSA)，DSSA描述领域模型中表示需求的解决方案；

3.领域实现：依据领域模型和DSSA 进行实现

三个层次系统模型：

1.领域开发环境

2.领域特定应用开发环境：应用工程师

3.应用执行环境

4中角色：领域专家、领域设计人员、领域实现人员、领域分析师



架构权衡分析方法（ATAM)

是一种系统架构评估方法，关注系统的**需求说明**，主要在系统开发前，针对性能、**可用性**、安全性和可修改性等质量属性进行**评价**和折中。

4个主要活动阶段：需求收集、**架构视图描述**、属性模型构造和分析、架构决策与折中，整个过程强调以**属性**作为架构评估的核心概念

在评估过程中，**权衡点**是一个会影响多个质量属性的架构设计决策



风险点是存在问题的架构设计决策，可能会导致的问题。

敏感点是一个或多个构件的特性

权衡点是影响多个质量属性的特性，是多个质量属性的敏感点。



架构描述语言（ADL）是一种概念架构，组成部分：组件、组件接口、连接件和架构配置。



架构设计主要关注软件组件的结构、属性和**交互作用**，并通过多种**视图**全面描述特定系统的架构。



软件构建是部署、版本控制和替换的基本单位。是一组通常需要同时部署的原子构件。原子构件通常成组部署，但是也能够单独部署。大多数原子构件都属于一个构件家族。



基于Web Services实现的面向服务系统中，服务提供者、服务使用者和服务注册器之间的远程交互通过**SOAP**（简单对象访问协议）消息实现，服务内容描述通过WSDL（web服务描述语言）标准实现，服务注册信息通过UDDI（服务同一描述、发现和集成）框架实现，通过**BPEL**（业务过程执行语言）将分散的、功能单一的web服务组织成一个复杂的有机应用。



C2体系结构风格：通过连接件绑定在一起，按照一组规则运作的并行构件网络。



### 架构概念

**架构的本质**

1.软件架构为软件系统提供了一个结构、行为和属性的高级抽象

2.软件架构风格是特定应用领域的惯用模式，架构定义了一个词汇表和一组约束



**架构的作用**

1.项目干系人进行交流的手段

2.可传递可复用的模型

3.有助于循序渐进的原型设计



### 架构4+1视图

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构4+1视图.png)



### 架构风格

[架构风格](https://blog.csdn.net/weixin_40972073/article/details/125400460)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构风格.png)



#### 数据流风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\数据流风格.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\数据流风格-子风格.png)



#### 调用返回风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\调用返回风格.png)

其中分层风格最为重要

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\分层架构风格.png)



#### 独立构件风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\独立构件风格.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\独立构件优缺点.png)



#### 虚拟机风格

类比 java 虚拟机

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\虚拟机风格.png)

#### 仓库风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\仓库风格.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\仓库风格优缺点.png)



#### 闭环控制风格(过程控制)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\闭环控制风格.png)



#### C2风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\C2风格.png)

#### MVC风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\MVC风格.png)



![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\MVP风格.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\MVVM风格.png)



#### 基于服务的架构（SOA)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\SOA.png)

服务构件对象的关系

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\服务构件对象的关系.png)



WEB Service

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\web service.png)

ESB（企业服务总线）

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\SOA.png)



关键技术

发现服务：UDDI

描述服务：WSDL

消息格式层：SOAP、REST



微服务和SOA对比

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\微服务和SOA对比.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\微服务和SOA对比2.png)



### MDA

通过映射的方式

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\MDA.png)



### ADL

ADL是一种形式化语言

三个基本元素：

构件、连接件、架构配置



### DSSA

特定领域架构模型

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\DSSA1.png)



### ABSD

基于架构的软件开发方法。在架构方面，对非功能性需求（性能、可用性、可修改性、安全性）远超过对功能性需求。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ABSD.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ABSD2.png)



### 软件架构评估

#### 质量属性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构评估-质量属性.png)

性能：系统响应能力。通常采用资源调度策略、增加系统资源

可用性：正常运行的时间比例。心跳、冗余策略、ping

安全性：阻止非授权用户使用服务的能力。审计追踪、限制访问

可修改性：方便修改。隐藏信息、运行时注册。灵活性高了修改起来就比较容易。



#### 四个点

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\四个点.png)



#### 架构评估方法

##### 软件架构分析方法（SAAM）

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\SAAM.png)

##### 架构权衡分析法（ATAM）

该框架主要关注系统的需求说明

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ATAM.png)

##### 成本效益分析方法（CBAM）



#### 质量效用树

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\质量效用树.png)

L:低级 M:中级 H:高级



### 构件与中间件

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\构件.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\中间件.png)

中间件优点：

1. 面向需求
2. 业务的分隔和包容性
3. 设计与实现隔离
4. 隔离复杂的系统资源
5. 符合标准的交互模型
6. 软件复用
7. 提供对应用构件的管理

构件复用流程:

检索与提取构件、理解与评价构件、修改构件、组状构件



## 系统开发基础

逆向工程导出的信息，4个抽象层次：

1.实现级：包括程序的抽象语法树、符号表等信息

2.结构级：程序分量之间的相互依赖关系，例如调用图、结构图等

3.功能级：程序段功能及程序段之间关系的信息

4.领域级：程序分量或程序与应用领域概念之间对应关系的信息



软件开发环境包括数据继承、控制集成和界面集成。



软件产品配置，有两大类

产品：需求文档、设计文档、源代码、测试用例

项目管理：工作计划、项目质量报告、项目跟踪报告



可行性分析：经济可行性、技术可行性、法律可行性、用户使用可行性



结构化分析方法的基本思想：自顶向下，逐层分解，把一个大问题分解成若干个更小的问题。

核心是数据字典，有三个层次模型：

数据模型：ER图

功能模型：DFD

行为模型：状态转换图



结构化设计是面向数据流的设计方法，主要包括架构设计、接口设计、数据设计和过程设计。



单元测试也称为模块测试，测试一个模块时，需要为该模块编写一个驱动模块和若干个桩模块。

驱动模块用来调用被测模块，桩模块用来模拟被测模块所调用的子模块。

自顶向下的单元测试先测试上层模块，再测试下层模块。测试下层模块时由于它的上层模块已测试过，所以不必另外编写驱动模块。

自底向上，测试上层模块时由于它的下层模块已经测试过，所以不必另外编写桩模块。



产品范围定义是信息系统要求的度量，而项目范围的定义是生产项目计划的基础。

产品范围的描述是项目范围说明书的重要组成部分。

项目范围定义的输入包括以下内容：

1.项目章程

2.项目范围管理计划

3.组织过程资产

4.批准的变更申请



RUP分解为4个顺序阶段：初始阶段、细化阶段、构建阶段和移交阶段。

每个阶段结束都要安排一次技术评审，是一个迭代和增量的过程。

4个阶段就是一个开发周期，每次经过这4个阶段就会产生一代软件。但每一次的侧重点都放在不同的阶段上。

好处：软件开发的早期就可以对关键的、影响大的风险进行处理。



面向对象设计原则：

单一原则：类完成的单一功能

里氏替换：不要破坏父类的结构

依赖倒置：抽象不应当依赖于细节，细节应当依赖于抽象，针对接口编程。

接口隔离：接口分类要精简，最少知道原则。

迪米特法则：降低耦合

开闭选择：遵循前5大原则



在软件系统工具中，版本控制工具属于软件维护工具，软件评价工具属于软件管理与软件支持工具。



面向对象的分析模型主要由顶层架构图、用例与用例图、领域概念模型构成。

设计模型则包含以**包图**表示的软件体系结构图、以**交互图**表示的**用例实现图**、完整精确的**类图**、针对负责对象的**状态图**和描述流程化处理过程的**活动图**



软件活动主要有：1.软件描述 2.软件开发 3.软件有效性验证 4.软件进化

按软件过程活动将软件工具分为软件开发工具、软件维护工具、软件管理工具和软件支持工具。



共享数据库为不同的应用程序提供统一的数据存储与格式定义，能够在一定程度上**缓解**数据语义不一致的问题，但无法完全解决该问题。



# 真题

## 2009年（第一次：58分）

### 综合知识

第5题：数据库设计需求分析阶段应完成的文档是数据字典和数据流图



8.无损连接分解，都是能推所有属性，所以，只要是包含候选关键字的，都是无损连接。



11.高速缓存对于程序员来说是透明的



16.

基准测试：公认的评价方法。测试多种计算机系统，比较和评价它们的性能。

负载测试：运行某种诊断程序，加大负载，检查哪个设备会发生故障。

集成测试：测试模块之间的接口是否正常起作用。

白盒测试：根据程序内部结构和内部逻辑，测试其功能是否正确。

黑盒测试：功能测试，根据外部功能来设计测试用例。



17.除cpu主频外，内存大小对计算机实际运行的处理速度也密切相关。



19.集成有三种：

面向信息集成：主要技术数据复制、数据聚合和接口集成

面向过程集成：处理不同应用系统之间的交互逻辑，与核心业务逻辑相分离，并通过不同应用系统之间的协作共同完成某项业务功能。

面向服务集成：是一个个web服务或者封装web服务的业务处理，支持服务接口描述和服务处理的分离。



35.基于构件的开发模型由软件的需求分析定义、体系结构设计、构件库建立、应用软件构建以及测试和发布5个阶段组成。



41.物理数据流图(PDFD)是网络架构DFD，显示的信息：1.服务器、客户端及其物理位置 2.处理器说明信息 3.传输协议 



43.系统测试：恢复测试、安全性测试、压力测试、性能测试、可靠性测试、可用性测试、可维护性测试和安装测试



48.基于架构的软件设计(ABSD)强调由商业、质量和功能需求的组合驱动软件架构设计。

是一个自顶向下，递归细化的过程。

三个基础：功能分解、选择架构风格、软件模板使用



50.架构复审人员由用户代表和领域专家参加复审。通常会对一个可运行的最小化系统进行架构评估和测试。



53.管道-过滤风格支持分阶段数据处理，特别适合服务端处理软件的需求。



55.闭环结构：适用于处理简单任务，并不适用于复杂任务。

分层结构：引入抽象层，在较低层次不确定的实现细节在较高层次会变得确定。



57.**架构模式**反映了开发软件系统过程中所作的基本设计决策；设计模式主要关注软件系统的设计，与具体的实现语言无法；惯用法则是描述如何实现构件及构件之间的关系，例如引用-计算式C++中的一种惯用法。



61.访问者模式：对某个固定结构的活动节点有多种处理能力，且处理能力可扩展。在不改变原来类结构的基础上增加新功能。访问者不破坏原有功能。



64.数据库容灾属于网络安全和应用安全考虑的范畴。



65.加密算法中，对称加密比非对称加密效率要高。RSA和ECC属于非对称加密算法，MD5为摘要算法，RC-5是对称加密算法。



### 案例分析

#### 第一题

1.1、

性能、可用性、可修改性、安全性、可靠性、易用性。

性能：系统的响应能力，指经过多长时间才能对某个事件做出响应。

可用性：系统正常运行的时间比例。

可修改性：能够快速地以较高的性能价格比对系统进行变更的能力。

安全性：系统向合法用户提供服务的同时能够阻止非授权用户使用服务的能力。

可靠性：系统在应用或错误面前维持软件系统功能的特性。

易用性：衡量用户使用软件产品的难易程度。



1.2、

(1)性能。可采用架构设计策略：增加计算资源、资源调度(先进先出队列、优先队列)

(2)安全性。可采用追踪审计、限制访问、入侵检测等

(3)可用性。主动冗余、心跳机制

(4)可修改性。隐藏信息、运行时注册



#### 第二题

2.1

数据流图作为一种图形工具，用来说明业务处理过程、系统边界内所包含的功能和系统中的数据流。

流程图是以图形化的方式展示应用程序从输入开始到获得输出为止的逻辑过程，描述处理过程的控制流。

两者区别：

(1)数据流图的处理过程可并行；流程图在某个时间点只能处理一个过程。

(2)数据流图展现了系统的数据流；流程图展现了系统的控制流。

(3)数据流图适用于系统分析中的逻辑建模阶段，流程图适用于系统设计中的物理建模阶段。



2.2

思路：先分析加工、再分析存储、最后分析外部实体

(1)“分类训练”加工：只有输入流没有输出流

(2)“分类处理”加工：只有输出流没有输入流

(3)“规则文件”数据流：外部实体没有经过加工，直接到数据存储

(4)“配置信息”数据流：外部实体之间没有加工处理，存在直接数据流



2.3

高质量数据流图设计时应该考虑的三个原则：

(1)复杂性最小化原则。DFD分层结构就是把信息划分为小的且相对独立的一大批子集，这样就可以单独考查每一个DFD。如果想要了解某一个过程更加详细的信息，可以进入过程的下一层；如果想知道一个DFD如何与其他DFD相关联，可以跳转到上一层进行考查。

(2)接口最小化原则。在设计模型时，应使得模型中各个元素之间的接口数或连接数最小化。

(3)数据流一致性原则。一个过程和它的过程分解在数据流内容中是否有差别？是否加工只有输入流没有输出流？或者加工只有输出流没有输入流？



#### 第四题

4.1

软件架构风格是描述某一类特定应用领域中软件系统组织方式和惯用模式。

面向对象架构风格的特征：将数据表示和基本操作封装在对象中。这种模式的构件是对象，对象维护自身的完整性，对象之间通过消息机制进行通信，通过对象之间的协作完成计算过程。

控制环路架构风格：将过程输出的指定属性维护在一个特定的参考值。通过收集实际和理想的过程状态信息，调整过程变量使得实际状态趋于理想状态。



4.2 结合题干分析

4.3 



## 2010年（第一次：53分）

### 综合知识

5.数据库设计分为用户需求分析、概念设计、逻辑设计和物理设计。

在数据库设计的**逻辑阶段**进行关系规范化



8.关系代数

R X S:表示等值连接，表示笛卡积，不去除重复的列。

R 蝴蝶 S：表示自然连接，会去除重复的列。

圆圈符号表示 where 过滤

pi符号表示 select 选择



14 15.网络系统生命周期分为5个阶段：需求规范、通信规范、逻辑网络设计、物理网络设计、实施阶段

逻辑网络阶段：根据需求规范和通信规范，实施资源分配和安全规划。



17.对运行系统评估的主要目的是评价信息系统在性能方面的表现，找出系统可能存在的性能瓶颈。

当系统性能降到基本水平时，需要查找影响性能的瓶颈并消除该瓶颈。



18.企业门户是一个信息技术平台，可以分为三种：

企业信息门户：访问数据时提供统一入口，实现收集、访问、管理无缝集成。

企业知识门户：提供一个知识平台，团队成员取得联系。

企业应用门户：提高企业的集中贸易能力、协同能力和信息管理能力的平台。



19.客户关系管理系统(CRM)将营销管理理念集成在软件上。

销售自动化是最基本的模块，营销自动化作为销售自动化的补充。

CRM和ERP会形成一定的闭环。



20.共享数据库为不同的应用程序提供统一的数据存储与格式定义，能够在一定程度上**缓解**数据语义不一致的问题，但无法完全解决问题。



21.远程过程调用一般基于同步方式；共享数据库、文件传输的集成方式在性能方面较差，系统不能保持及时数据同步；消息传递的集成方式能够保证数据的异步、立即、可靠传输。



22.项目范围说明书，范围定义的输入：

项目章程；项目范围管理计划；组织过程资产；需求分解

项目文档管理方案不属于范围定义的输入。



23.项目时间管理的过程包括：活动定义、活动排序、活动资源估算、活动历时估算、制定进度计划以及进度控制。通常使用WBS工作分解结构来进行活动定义。鱼骨图是发现“根本原因”的方法，通常用来进行因果分析。



26.

RUP 4+1 视图：逻辑视图、实现视图、进程视图、部署视图和用例视图

用例视图：分析人员和测试人员关心系统的行为

逻辑视图：最终用户关心的是系统的功能

实现视图：程序员

进程视图：系统集成人员关心的是系统的性能、可伸缩性、吞吐率

部署视图：系统工程师



29.环境集成机制：

数据集成：访问信息的统一的数据接口规范

界面集成：统一界面，统一操作

控制集成：支持开发活动之间的通信、切换、调度和协同工作



36.基于构件的开发方法中，逻辑构件模型描述抽象设计、用接口描述服务以及功能的交互、是系统设计蓝图。

物理构件模型描述技术实施、硬件分布、绑定网络和通信协议，了解系统性能、吞吐率等功能性属性。



38.对象管理组织(OMG)定义了4中构件标准。

实体构件：长期持久化，主要用于事务性行为，由容器管理持久化

加工构件：由容器管理持久化，但客户端没有可访问的主键

会话构件：不需要容器管理持久化，状态信息自己管理

服务构件：无状态的



39.分布式系统分为5个逻辑计算层：

表示层：实现用户界面

表示逻辑层：生成数据表示而必须进行的处理任务，如输入数据编辑等

应用逻辑层：支持业务的处理过程，数据计算和分析

数据处理层：存储和访问数据库，查询语句和存储过程

数据层：实际存储的业务数据



40.客户机/服务器系统开发时可以采用不同的分布式计算架构。

分布式表示架构：表示层和表示逻辑层在客户机，应用逻辑层、数据处理层和数据层仍在服务器

分布式数据架构：表示层、表示逻辑层、应用逻辑层在客户机，数据处理层和数据层在服务器

分布式数据和应用架构：表示层和表示逻辑层在客户机、应用逻辑层在应用服务器上，数据处理层和数据层在数据服务器上。



41.系统输入设计中，通过内部控制的方式验证输入数据的有效性。数据类型检查确保正确的数据类型，自检位对关键字进行校验位检查；域检查验证数据的合法取值范围；格式检查按照数据格式对输入数据格式。



44.一般在设计软件之初，会根据用户需求，确定多个候选架构，从中选择一个较优的架构。



45.软件架构设计包括：提出架构模型、产生架构设计和进行设计评审。



51.隐式调用架构风格比较适合根据外部事件进行处理和动作的场景。



54.领域专家的主要任务提供知识和约束



62.敏感点式是实现一个特定质量属性的关键特征，该特征为一个或多个软件构件所共有。权衡点会影响一个或多个属性，并对多个属性来说都是敏感点。



64.网络安全漏洞通常是指网络节点的系统软件或应用软件在逻辑上的缺陷。



### 案例分析

#### 第一题（架构风格）

1.1 软件架构风格是描述某一个特定应用软件系统的组织方式和惯用模式。组织方式描述的是系统构件的组织形式，惯用模式反映的是众多系统共有的结构和语义。

主程序-子程序架构风格，所有的计算构件作为子程序协作工作，主程序顺序地调用子程序，构件通过共享存储区交换数据。

管道-过滤架构风格，每个构件都有输入和输出，构件接收数据输入，经内部处理，然后产生输出数据。这里的构件称为过滤器，构件之间的连接件称为数据流传输的管道。



1.2 结合题干进行分析

1.3 填空内容时，可以去题干中摘抄相应的关键内容。



#### 第二题（数据库）

2.1 

集中式数据架构是一个处理器与它相关联的数据存储设备以及其他外围设备组成，它被物理地定义到单个位置。系统提供数据处理能力，用户可以在同样的站点上操作，也可以在地理位置隔开的其他站点上通过远程终端来操作。系统及其数据管理被中心站点集中控制。

分布式数据架构使用多个计算机系统上的多个局部数据库系统，数据可以在多个不同的局部数据库中进行传送，运行在多种不同的计算机上，支持多种不同操作系统。这些机器分布在不同的地理位置并通过多种通信网络连接在一起。企业数据可以分布在不同的计算机上，一个应用程序可以操作位于不同地理位置的机器的数据。

读写分离架构利用了数据库复制技术，将数据的读和写分布在不同的处理节点上，从而达到提高可用性和扩展性的目的。



2.2

CRSS的分布式数据库系统需要由多个局部数据库系统、多个热备份数据库系统和多个缓存系统组成。局部数据库系统负责数据的写入，多个热点备份数据库系统用以解决单点故障的问题，数据缓存负责为应用提供所读取的数据。

读取数据：应用访问缓存，如果命中则返回，否则从局部数据库系统中读取数据并将数据加载到缓存后返回。

添加数据：采用延迟加载策略，应用将数据直接写入局部数据库。

更改数据：应用更改局部数据库中的数据，将缓存中的数据标为失效。

删除数据：应用删除局部数据库中的数据，将缓存中的数据标为失效。



2.3

集中式数据架构通过向上扩展提升系统的可扩展性。具体的方式可以包括硬件扩容(增加CPU数、内存容量、磁盘数量)和硬件升级(更换为高端主机或高速磁盘)。

分布式数据架构可以通过向外扩展提升系统的可扩展性。具体实现发现包括数据复制、数据垂直切分或水平切分、缓存和全文搜索等。



#### 第四题（架构设计）

4.1

ESB的主要功能包括：

(1)应用程序位置的透明性

(2)传输协议转换

(3)消息格式转换

(4)消息路由

(5)消息增强

(6)安全支持

(7)监控和管理

采用ESB作为集成架构，能够实现灵活的部署结构，包括CS结构、P2P结构等。

待集成系统只需要和总线联系，彼此之间不需要互相通信，这样大大降低了系统的耦合程度。

在加入新的待集成系统时，只需要采用插件的方式实现传输协议和数据格式的适配即可，系统可扩展性强。



4.2 

具体需求具体分析

系统运行平台和语言差异大的可以采用数据共享服务，即面向对象服务的方式，将工具的功能包装成服务，实现跨平台跨语言。

通信协议、数据格式不统一可以采用基于消息总线的方式，进行数据适配等





4.3

在实现工具之间数据格式灵活转换时，可以采用适配器设计模式。

首先定义一个统一的数据转换接口类，实际转换类需要继承数据转换接口类，并实现接口转换类定义的功能，实际转换类可以定义不同的数据转换格式。



## 2011年（第一次：56分）

### 综合知识

1.操作系统为用户提供了两类接口：操作一级的接口和程序控制一级的接口。操作一级的接口包括操作控制命令、菜单命令、窗口等；程序控制一级的接口包括系统调用



9.CISC的指令系统复杂，难以用硬布线逻辑电路实现控制器，通常采用微程序控制。

RISC 适合采用硬线控制逻辑



21.当需要集成并灵活定义系统功能之间的协作关系时，应该采用基于**工作流**的功能关系定义方式



23.**软件评审**是软件质量保证的主要活动之一



28.RUP，三个特点：迭代、用例驱动、架构设计。四个过程：初始（定义视图、模型、系统范围）、细化（确定体系结构、制定计划、资源要求）、构造（构造产品演进需求至产品提交）、移交（把产品交给用户）



37.企业信息化建设的核心和本质是企业运用信息技术，进行知识的挖掘，对业务流程进行管理。



39.外部设计功能和接口，内部设计细化外部设计。



49.ABSD三个基础：功能分解、选择架构风格实现质量以及商业需求、软件模板的使用



61.ATAM是一种常用的软件架构评估方法，该方法强调对软件的质量属性进行分析、分类和优先级排序等工作。



64.Snmpv 3，主要威胁：一修改信息，二假冒。次要威胁，一修改报文流，二信息泄露。



65.PGP用来实现安全电子邮件的协议。



### 案例分析

#### 第一题（质量属性）



#### 第二题（数据库）

数据库规范化和反规范化



#### 第四题（web)

4.1、4.2结合题干进行分析回答

4.3

REST从资源的角度定义网络系统结构的，分布在各处的资源由统一资源标识符(URI)确定，客户端程序通过URI获取资源的表现，并且通过获得资源表现使得其状态发生改变。

REST中将资源、资源的表现和获取资源的动作三者进行分离。



## 2012年 （第一次：50分）

### 综合知识

9.软件中间件可以提高开发效率，可以降低应用软件设计的复杂度。



13.TCP采用可变大小的滑动窗口协议进行流量控制。在向前纠错系统中，当接收端检测到错误后就根据纠错编码的规律自行纠错；在向后纠错系统中，接收方会请求发送方重发出错分组。IP协议不预先建立虚电路。



15.SAN主要采取数据块的方式进行数据和信息的存储，目前主要使用以太网(IPSAN)和光纤通道(FCSAN)两类环境中。



16.对于采用过程调用风格，将显示调用策略替换为隐式调用策略能够提高系统的灵活性，但会降低系统的性能。



19.CRM将人力资源、业务流程与专业技术进行有效整合。四个主要模块：销售自动化、营销自动化、客户服务与支持、商业智能。



21.企业信息化方法包括：业务流程重组、核心业务应用、信息系统建设、资源管理和人力资本投资方法。



22.企业信息资源集成前提是对企业**信息功能**的集成，核心是对企业**内部和外部信息流**的集成



28.UML利用用例及用例图表示需求，利用包图及类图表示目标软件系统的总体架构。



29.快速应用开发(RAD)基于**构件**的开发方法



31.形式化方法需要很强的数学功底，应用于安全性较高的系统开发。



32.软件开发环境，根据功能，可以划分为环境信息库、过程控制与消息服务器、环境用户界面。



39.ANSI/IEEE 1471-2000，**视图**主要描述软件架构模型，**视角**描述相关利益人所关注的架构模型，**架构**是对所有利益相关人关注点的响应和回答。



64.在PKI系统体系中，**证书机构CA**负责生成和签署数字证书，**注册机构RA**负责验证申请数字证书用户身份。



66.不同种类的商品可以使用相同或类似的商标，但是不能在任何商品中使用与驰名商标相同或类似的商标。



68.我国标准分为

国家标准(GB，GB/T)、行业标准(QJ航天、SJ电子、JB机械、JR金融、HB航空)、

地方标准(DB)、企业标准(Q)



### 案例分析

#### 第一题(架构风格)

1.1 

架构风格是描述软件系统的一种组织方式和惯用模式。组织方式描述的是系统构件的组织形式，惯用模式反映的是众多系统中共有的结构和语义。

(1)从集成开发环境与用户的交互来看，...（结合材料）。采用以数据存储为中心的架构风格能够很好地支持交互数据处理，而管道过滤架构风格则对用户的交互式数据处理有限。

(2)从集成开发环境的扩展性来看，...（结合材料）。在这种情况下，采用以数据存储为中心的架构风格，以数据格式解耦各种功能之间的依赖关系，也可以灵活定义功能之间的逻辑顺序。管道-过滤风格同样以数据格式解耦数据处理过程之间的依赖关系，但其在数据处理逻辑关系的灵活定义方面较差。

(3)从集成开发环境的数据管理来看，...（结合材料）。以数据存储为中心的架构将数据存储在统一的中心存储器中，中心存储能够表示多种数据格式，并能够为数据格式转换提供各种支持。管道-过滤器架构风格只能支持有限度的数据格式，并且在数据格式转换方面的灵活性较差。



1.2 

(2)适合采用解释器的架构风格。具体：1.为...定义某种语言，并描述其语法与语义2.编写解释器对该语言进行解释 3.生成对应的脚本语言程序

(3)适合采用隐式调用的架构风格。具体，定义...这一事件，实现...定位函数。集成开发环境维护一个事件注册表结构，将事件与定位函数关联起来形成注册表中的一个记录项。在调试过程中，集成开发环境负责监听各种事件，当事件发生时，集成开发环境查找事件注册表，找到定位函数，从而实现...。



#### 第四题（设计模式）

4.1

创建型模式主要用于创建对象，为设计类实例化新对象提供指南。

结构型模式主要用于处理类或对象的组合，对类如何设计以形成更大的结构提供指南。

行为型模式主要用于描述类或对象的交互以及职责的分配，对类之间交互以及分配责任的方式提供指南。



4.2

创建型：原型模式、构造模式

结构型：外观模式、代理模式、适配器模式

行为型：中介模式、命令模式、状态模式、策略模式



4.3 

(1)策略模式

(2)适配器模式



#### 第五题（数据库）





## 2013年（第一次：54分）

### 综合知识

1.逻辑页=页号+页内地址，高位代表页号、低位代表页内地址。



22.企业内部的信息集成：技术平台集成、数据集成、应用系统集成和业务过程集成。

应用系统集成实现不同应用系统互操作，数据和方法共享。业务过程集成实现系统之间的连接、协调和信息共享。



28.遗留系统的演化四种策略：

淘汰：技术含量低、业务含量低

继承：技术含量低，业务含量高

集成：技术含量高，业务含量低

改造：技术含量高，业务含量高



64.Kerberos可以防止偷听和重放攻击，时间戳可以防止重放攻击。第三方认证服务的两种体制分别是Kerberos和PKI。



### 案例分析

#### 第一题（架构设计）

1.2、企业服务总线ESB是传统中间件技术与XML、Web服务等技术相结合的产物，主要支持异构系统集成。ESB基于内容的路由和过滤，具备复杂数据的传输能力，并可以提供一系列的标准接口。

ESB的主要功能：

(1)服务位置透明性

(2)传输协议转换

(3)消息格式转换

(4)消息路由

(5)消息增强

(6)安全性

(7)监控与管理



#### 第四题（设计模式）

4.1

MVC的作用：

(1)易于扩展，视图的变更与模型无关

(2)易于维护，控制器和视图随着模型的扩展而扩展，只要保持公共接口，旧版本依旧可以使用

(3)可支持功能强大的用户界面



4.2

从设计模式的角度来说，整个XML表现层解析的机制是一种策略模式。在调用显示GUI时，不是直接调用特定的表现技术的API，而是对应的XML文件，根据解析器解析XML，得到GUI视图实例对象，这样GUI开发人员来说，只需要维护一套XML文件即可。



## 2014 年（第一次：52分）

### 综合知识

16.评测程度依次降低：真实程序、核心程序、小型基准程序和合成基准程序。TPC-C是在线事务处理的基准程序，TPC-D是决策支持的基准程序。



19.ERP：物流、资金流和信息流的管理系统。

五个层次生产计划：

生产预测计划：对市场需求进行比较准确地预测

销售管理计划：对销售部门的相关业务进行管理

生产计划大纲：根据经营计划的生产目标制定

主生产计划：一定时期内生产什么，生产多少

物料需求计划：采购

能力需求计划：认识企业生产能力的瓶颈



23.集成平台基本功能中，信息集成服务实现不同数据库系统之间的数据交换、互操作、分布管理和共享信息模型；应用集成服务能够为应用提供数据交换和访问操作，是各种不同的系统能够相互协作。



26.JRP的主要意图是收集需求，而不是对需求进行分析和验证。



39.单元测试也称为模块测试，测试一个模块时，需要为该模块编写一个驱动模块和若干个桩模块。

驱动模块用来调用被测模块，桩模块用来模拟被测模块所调用的子模块。

自顶向下的单元测试先测试上层模块，再测试下层模块。测试下层模块时由于它的上层模块已测试过，所以不必另外编写驱动模块。

自底向上，测试上层模块时由于它的下层模块已经测试过，所以不必另外编写桩模块。



66.软件商标权的保护对象是软件注册商标



### 案例分析





# 案例分析

重点内容：

软件架构设计：软件架构设计（必考）、软件质量属性（第一、重点）、架构模型（风格）（第二、重点）、架构评估

设计模式：设计模式分类

系统设计：数据库设计、中间件以及应用服务器、性能设计与性能评估



## 软件工程

### 需求分析-结构化分析

自顶向下分析

数据流图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\数据流图.png)



平衡原则：父子图平衡

异常问题：

黑洞：一个加工只有输入流而没有输出流

奇迹：一个加工只有输出流而没有输入流

灰洞：一个加工的输入流无法通过加工产生输出流



结构化分析方法的基本思想是自顶向下，逐层分解，把一个大问题分成若干个小问题。

结构化分析方法的核心是数据字典，围绕这个核心，有三个层次模型，分别是数据模型、功能模型和行为模型（状态模型）。在实际工作中，一般用ER图表示数据模型，DFD表示功能模型，状态图表示行为模型。

### UML图

用例图关系

包含关系：是必须选择的

扩展关系：是可选的

泛化关系：一定可以呈现父子关系，而包含关系不一定呈现。

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\用例图关系.png)

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\用例关系2.png)

用例规约

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\用例规约.png)



类图关系

聚合关系：整体消亡了，部分还可以存在。

组合关系：整体消亡了，部分也消亡。

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\类图关系.png)



顺序图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\顺序图.png)



通信图（协作图）

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\通信图.png)



状态图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\状态图.png)



活动图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\活动图.png)

泳道活动图

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\泳道活动图.png)



部署图

系统已经开发完毕了，如何去部署软件硬件的问题。

![](D:\github\MyKnowledgeRepository\img\ruankao\软件工程\部署图.png)



## 数据库设计

数据库设计关注的问题：性能、数据一致性、安全



**数据库设计过程**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\数据库设计过程.png)

**规范化-范式**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\范式.png)

范式级别提升带来了什么负面影响？

数据库规范化的过程，实际上是对数据表的不断拆分，以达到更高的规范化程度。这样处理带来的问题是：系统大量查询不能通过单表来完成，而是需要将多表进行连接查询，所以表拆分的越多，查询性能也就越差。



**反规范化**

规范化设计后，数据库设计者希望牺牲部分规范化来提高性能，这种规范化设计的回退方法称为反规范化。

优点：提高统计、查询效率

缺点：增加了数据冗余，浪费存储空间。增删改的效率降低，可能导致数据不一致，可能产生添加、修改、删除异常。

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\反规范化.png)

反规范化技术：

(1)增加冗余列：通过增加数据冗余减少或避免查询时的连接操作。

(2)增加派生列：在表中可以增加由本表或其他表中数据计算生成的列，减少查询时的连接操作并避免计算或使用集合。

(3)表水平分割：把数据放到多个独立的表中，主要用于表数据规模很大、表中数据相对独立

(4)表垂直分割：对表进行分割，将主键与部分列放到一个表中，主键与其他列放到另一个表中，查询时减少I/O次数。



反规范化缺点

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\反规范化缺点.png)



**索引**

提高查询效率，但降低了增加、修改、删除的效率，并且索引占用存储空间；B树和B+树；



**视图**

并不在数据库中实际存在，而是一种虚拟的表

优点：

1.视图能简化用户的操作

2.视图机制可以使用户以不同的方式查询同一数据

3.视图对数据库重构提供了一定程度的逻辑独立性

4.视图可以对机密数据提供安全保护



物化视图：将视图的内容物理存储起来，其数据随原始表变化，同步更新。



**数据不一致问题**

数据存了多份，存在了不同的地方，一份数据是不可能出现数据不一致问题的。

解决办法：应用程序、触发器、物化视图



**分区分表分库**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\分区分表分库.png)



分区方式

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\分区方式.png)



分区优点：

1.相对于单个文件系统或硬盘，分区可以存储更多的数据

2.数据管理方便。比如要清理或者废弃某年的数据，可直接删除该日期的分区数据

3.精准定位分区查询数据，不需要全表扫描，大大提高数据库检索效率

4.可跨多个分区磁盘查询，来提高查询的吞吐量

5.在涉及聚合函数查询时，可以很容易进行数据的合并



**分布式数据库系统**

主要考查点：

分布透明性

* 分片透明：分不分片用户感受不到
  * 水平分片：按行(记录)分
  * 垂直分片：按列(字段)分
* 位置分片：数据存在哪里，用户不用管



**NoSQL**

两者对比

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\NoSQL对比.png)



**联邦数据库系统**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\联邦数据库系统.png)



**数据库性能优化**

![](D:\github\MyKnowledgeRepository\img\ruankao\数据库\数据库性能优化.png)



## 架构设计

### 架构风格

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构风格.png)



### 软件架构评估-质量属性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\架构评估-质量属性.png)

敏感点：为了实现某种特定的质量属性，一个或多个构件的特性。

权衡点：影响多个**质量属性**的特性，是多个质量属性的敏感点。通常权衡安全性和性能这两个质量属性。

风险点：架构设计中潜在的、存在问题的架构决策所带来的隐患。

非风险点：不会带来隐患，一般以“xx要求是可以实现或可接受的”方式表达



### Web架构

考查点：高性能、高可用、可维护、可应变、安全性

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\Web架构.png)



#### 集群、负载均衡

集群的引入会带来的问题：

1.用户请求由谁来转发给具体的应用服务器？（负载均衡）

2.用户每次访问的服务器不一样，那么如何维护session一致性问题？（有状态、无状态问题） 





引入负载均衡 + session共享机制

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\负载均衡+session共享.png)



**负载均衡技术**

* 应用层

  * HTTP重定向

    HTTP重定向就是应用层的请求转发。用户的请求其实已经到了HTTP重定向负载均衡服务器，服务器根据算法要求用户重定向，用户收到重定向，再次请求真正的集群。

    特点：实现简单，但性能较差

  * 反向代理

    在用户请求到达反向代理服务器时，由反向代理服务器根据算法转发到具体的服务器。常用nginx作为反向代理服务器

    特点：部署简单，但代理服务器可能成为性能瓶颈。

* 传输层

  * 基于DNS的负载均衡

    DNS域名解析负载均衡就是在用户请求DNS服务器，获取域名对应的IP地址时，DNS服务器直接给出负载均衡后的服务器IP。

    特点：效率比HTTP重定向高，减少维护负载均衡服务器的成本。但一个应用服务器故障，不能及时通知DNS，而且DNS负载均衡的控制权在域名服务商那里，网站无法做更多的改善和更强大的管理。

  * 基于NAT的负载均衡

    将一个外部的IP地址映射为多个IP地址，对每次连接请求动态地转换为一个内部节点的地址。

    特点：技术较为成熟，一般在网关位置，可以通过硬件实现。像四层交换机一般采用这样的技术



**均衡算法**

* 静态算法
  * 轮转算法：轮流将服务请求调度给不同的节点
  * 加权轮转算法：考虑不同节点处理能力的差异
  * 源地址哈希散列算法：根据请求的源IP地址，作为散列键从静态分配的散列表找出节点。
  * 目标地址哈希散列算法：根据请求的目标的IP地址进行散列
  * 随机算法：随机分配，简单，但不可控
* 动态算法
  * 最小连接数算法：新请求分配给当前活动请求数量最少的节点，每个节点处理能力相同的情况下。



**有状态和无状态**

无状态服务：对单次请求不依赖于其他请求，即处理一次请求所需要的全部信息，服务器本身不存储任何信息。

有状态服务：会在自身保存一些数据，先后的请求是有关联的。



#### 数据持久化

**ORM**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\ORM.png)



#### 读写分离

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\数据库读写分离.png)

#### 缓存

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\缓存技术.png)



**缓存与数据库的协作**

（一）读取操作

1.根据key从缓存中读取

2.若缓存中没有，则根据key在数据库中查找

3.读取到值之后更新缓存

（二）数据写入

1.根据key值写入数据库

2.根据key更新缓存



**Redis和Mecache比较**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\Mecache和Redis比较.png)



**Redis集群切片**

集群切片的基本思想：Redis不止一台服务器，可能有多台，那数据到底存在哪台服务器？

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\Redis集群切片.png)



分片方案

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis数据分片方案.png)

一致性哈希算法建立了一个圈圈机制，把服务器和哈希值都描绘在圆圈上面，然后根据圆圈顺时针方向找到哪一台服务器，就把数据存在哪一台服务器上面，建立了一种动态规则。（适合新增服务器）

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis分片方案1.png)



**Redis分布式存储**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\Redis分布式存储方案.png)



**redis数据类型**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis数据类型.png)



**redis淘汰策略**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis淘汰策略.png)

**redis持久化**

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\redis持久化.png)



**redis常见问题**



![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\缓存雪崩.png)



![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\缓存穿透.png)



![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\缓存降低.png)



#### CDN（内容分发网络）

思想：建立镜像站点，当有访问请求时，以就近原则为访问。

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\CDN.png)



#### web系统分层

![](D:\github\MyKnowledgeRepository\img\ruankao\架构设计\web系统分层.png)





# 论文写作

## 论文写作四部曲

1. 找准核心论点（5分钟）
2. 搭建论文框架（10分钟）
3. 撰写摘要（15分钟）
4. 正文写作（90分钟）



## 撰写摘要

![](D:\github\MyKnowledgeRepository\img\ruankao\论文\撰写摘要.png)



建议第三个模板，比较常规。

![](D:\github\MyKnowledgeRepository\img\ruankao\论文\摘要模板.png)



## 加分与扣分

![](D:\github\MyKnowledgeRepository\img\ruankao\论文\加分扣分准则.png)



## 论文模板

**摘要**

​	2019年4月，我参加国内某一线互联网大厂的直播数据中台项目的开发。该平台解决了集团下各个app等直播模块数据孤岛问题，通过数据中台统一服务的方式解决能力横向复用难、重复造轮子的问题，带来的收益是1.补齐了直播业务缺失的数据统计能力；2.统一维护，减少了维护成本；3.只要是接入中台的产品，能快速应用一套统计体系。我作为该项目的架构师和主要负责人，主要完成了需求获取分析、系统架构分析和设计等工作。通过团队一整年的努力，平台开发完成并顺利上线，整个系统已经稳定运行2年了，顺利达到了既定目标。本文作者结合实际经验，以该项目为例，讨论...**(主题)**，包括...**(过程、方法、措施)**。



**正文**

​	2019年以前，集团下的各个app都有直播模块，各app的直播是各团队自己迭代维护的，业务团队独立、研发团队独立、数据团队逻辑上也是独立。这带来了以下问题：1.能力横向复用难，重复造轮子问题。例如，一个功能、一套方法论，在某app端验证效果好，想要移植到另一个app，需要重新开发，这也带来了重复造轮子的问题。2.因为重复造轮子，也就造成了产品、研发、运营人力和成本的浪费。3.同时会造成对外品牌认知不统一，品牌效应难以拓展延申的问题。正是在这一背景下，集团提出建设直播数据中台，该项目既补齐了直播业务缺失的数据统计能力，比如，口径统一，对齐了各产品的数据口径，减少了沟通成本，同时统一了维护，减少了维护成本。只要是接入中台的产品，能快速应用一套统计体系。**（开头项目背景介绍）**

​	**回答问题二，介绍相关的技术点**

​	...

​	...

​	**结合项目实际情况进行分析**

​	...

​	...

​	经过我和团队的不懈努力，历时一年多，项目于2020年7月上线，整个系统运行稳定，达到了预期的目标和要求，提高了集团的业务处理的效率，创造了极大的价值。但是，在实施过程中也存在一些问题，由于数据中台里面存在很多大数据任务，如果大数据任务不分优先级同时在跑，那计算资源很快就会变得特别紧张，导致核心任务不能及时跑完，因此需要建立具有动态优先级调整机制的处理队列，让核心任务优先使用计算资源。我们也已经把这些经验和教训以文档的方式记录下来，供其他技术人员学习，为今后系统架构设计提供帮助。



## 自己的论文

### 架构风格

**摘要**

​	2019年4月，我参加国内某一线互联网大厂的直播数据中台项目的开发。该平台解决了集团下各个app等直播模块数据孤岛问题，通过数据中台统一服务的方式解决能力横向复用难、重复造轮子的问题，带来的收益是补齐了直播业务缺失的数据统计能力；减少了维护成本；只要是接入中台的产品，能快速应用一套统计体系。我作为该项目的架构师和主要负责人，主要完成了需求获取分析、系统架构分析和设计等工作。通过团队一整年的努力，平台开发完成并顺利上线，整个系统已经稳定运行2年了，顺利达到了既定目标。本文作者结合实际经验，以该项目为例，讨论几种常用软件架构风格及特点，然后结合本次项目采用的数据流风格、虚拟机风格以及仓库风格，论述该项目在软件架构选择过程中，为何选择这三种风格组合，最后总结项目中所遇到的问题。



**正文**

​	2019年以前，集团下的各个app都有直播模块，各app的直播是各团队自己迭代维护的，业务团队独立、研发团队独立、数据团队逻辑上也是独立。这带来了以下问题：1.能力横向复用难，重复造轮子问题。例如，一个功能、一套方法论，在某app端验证效果好，想要移植到另一个app，需要重新开发，这也带来了重复造轮子的问题。2.因为重复造轮子，也就造成了产品、研发、运营人力和成本的浪费。3.同时会造成对外品牌认知不统一，品牌效应难以拓展延申的问题。正是在这一背景下，集团提出建设直播数据中台，该项目既补齐了直播业务缺失的数据统计能力，比如，口径统一，对齐了各产品的数据口径，减少了沟通成本，同时统一了维护，减少了维护成本。只要是接入中台的产品，能快速应用一套统计体系。

​	常见的五种架构风格有数据流风格、调用返回风格、独立构件风格、虚拟机风格以及仓库风格，接下来会对这五种架构进行具体介绍和分析。

​	数据流风格包括批处理序列架构风格和管道-过滤架构风格。1.批处理序列架构风格，组件是一系列固定顺序的计算单元，组件间只能通过数据传递交互。每个处理步骤是一个独立的程序，每一步必须在前一步结束后才开始，数据必须是完整的，以整体的方式传递。2.管道过滤风格中每一个构件都有一组输入和输出，构件读取输入的数据流，经内部处理，然后产生输出数据流。

​	调用返回风格包括层次架构架构风格、面向对象架构风格和主程序子程序架构风格。1.层次结构架构风格中，层次系统组织成一个层次结构。这个风格的特点是每层为上一层提供服务，使用下一层服务，只能见到与自己邻接的层。大的问题分解为若干个渐进的小问题，逐步解决，隐藏了很多复杂度。每修改一层，最多影响邻接层。上层必须知道下层的身份，不能调整层次间的顺序。2.面向对象风格是将数据的表示方法和对应的操作方法封装在一个对象中，对象和对象之间是通过函数和过程调用来交互。这种风格的构件就是对象，连接件就是函数和过程调用。这种结构风格中包含有封装、交互、多态、集成和重用等特征。 3.主程序子程序风格是单线程控制，把问题划分为若干个处理步骤，构件即为主程序和子程序。子程序通常可合成为模块，过程调用充当连接件，作为交互机制，调用关系就有层次性。

​	独立构件风格包括进程通信架构风格和事件驱动架构风格。1.进程通信架构风格中，构件是独立的进程，连接件是消息传递，这种风格的特点是构件通常是命名过程，消息传递的方式可以是点到点，异步和同步方式以及远程过程调用等。2.事件驱动架构风格中，构件不直接调用一个过程，而是触发或广播一个或多个事件，系统中其他构件中的过程在一个或多个事件中注册，当一个事件被触发，系统自动调用在这个事件中注册的所有过程。

​	虚拟机风格包括解释器风格和基于规则的系统架构风格。1.解释器架构风格中一个解释器通常包括完成解释工作的解释引擎，一个将被解释的代码的存储区，一个记录解释引擎当前工作状态的数据结构，以及一个记录源代码被解释执行的进度的数据结构。具有解释器风格的软件中含有一个虚拟机，可以仿真硬件的执行过程。2.基于规则的系统包括规则集、规则解释器、规则数据选择器及工作内存。

​	仓库风格包括数据库架构风格和黑板架构风格。1.数据库架构风格中构件主要有两大类，一个是中央共享数据源，保存当前系统的数据状态；另一个是多个独立处理元素，处理元素对数据元素进行操作。2.黑板架构风格包括知识源、黑板和控制3个部分。知识源包括若干个独立计算的不同单元，提供解决问题的知识，响应黑板上的变化。黑板是一个全局数据库，包含解域的全部状态，是知识源互相作用的唯一媒介。黑板通常应用在对于解决问题中没有确定性算法的系统中，例如语音识别、模式识别、图像处理以及知识推理等。

​	首先本次项目的用户使用界面采用的是B/S架构系统，直播数据中台还需要数据仓库提供相关业务指标数据，并采用微服务架构与多个app系统进行交互。在架构风格上，最终选择管道过滤器风格、分层架构风格、进程通信架构、基于规则的系统架构和数据库系统几个架构风格进行混合使用。下面讲述选择这几种架构风格的原因。

​	选择管道过滤器架构风格和进程通讯架构风格是因为中台涉及到直播数据指标需要由数据仓库提供，通过自建的ETL中间件每日从仓库中抽取数据，通过转换任务进行逻辑处理，每个转换都有一个输入流和输出流，许多转换任务一起构成了一个完整的数据处理流程。直播数据中台需要与不同的app系统的数据进行密切交互，涉及到异构系统之间的通信，业务模块通过远程调用其他服务和点到点异步消息通讯。

​	选择分层架构风格和数据库系统架构是因为用户使用平台时使用的是B/S架构，具有N层架构的特点，采用表示层、逻辑处理层和数据持久层的方式，每一层只为上一层提供服务，是典型的分层架构。数据持久层保存的数据、ETL抽取的数据以及Spark任务处理的数据都保存到Hive数据仓库中，逻辑层处理涉及的操作都与中央的数据仓库交互，完成对数据的读取、处理和存储等操作。

​	选择解释器的系统架构风格是由于大数据处理Spark经常要编写很长一段scala代码去处理数据，对大数据处理开发人员要求比较高，开发也比较难，因此平台推出sql化的标准统一服务。开发人员只需要写spark sql代码即可，由底层的相应模块去解释执行sql代码，翻译为相应的Spark RDD的任务去执行处理。这种解释器的系统架构风格大大提高了数据开发人员的效率，使数据开发人员更加专注于业务的处理，而不需要花费太多地精力去研究技术。

​	经过我和团队的不懈努力，历时一年多，项目于2020年7月上线，整个系统运行稳定，达到了预期的目标和要求，提高了集团的业务处理的效率，创造了极大的价值。但是，在实施过程中也存在一些问题，由于数据中台里面存在很多大数据任务，如果大数据任务不分优先级同时在跑，那计算资源很快就会变得特别紧张，导致核心任务不能及时跑完，因此需要建立具有动态优先级调整机制的处理队列，让核心任务优先使用计算资源。我们也已经把这些经验和教训以文档的方式记录下来，供其他技术人员学习，为今后系统架构设计提供帮助。



​	

​	




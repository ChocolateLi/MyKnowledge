# 数据仓库

## 数据仓库设计

**金科玉律**

1、在每个代理键为主键的表中，尤其维度表，必定有自然键作为可选键。绝对不允许仅仅存在一个代理键而没有自然键的现象

2、代理键绝不可以对用户可见，通常用于join，而不用where的搜索条件。此外代理键的命名规则要非常明确，比如xxxxx_SK



## NULL

**隐患**

1. 数学运算：任何数字与null值做数学运算都为null
2. where子句：搞清楚null含义，小心"<>"以及“全选”
3. join：null与null join没有结果
4. 聚合函数：若null设为0，AVG、MIN、MAX、COUNT均受影响
5. 子查询：当存在Null时，使用not in需要特别注意



## 规范化

规范化的目的：减少冗余，同一含义的数据只存一份



每个非键值属性必须依赖于键（1NF），依赖整个键而不是键的一部分（2NF），并且不依赖于其他非键值属性（3NF）



规范化之前：

1、列出实体：名词

2、勾勒关系：动词

3、尽量消除多对多关系

4、列出所有属性



### 第一范式

原子性，列不可再分，没有重复的列，也没有重复的行



### 第二范式

非主键属性依赖于整个键，而不是其中一部分



1、首先满足第一范式

2、如果非主键属性只依赖于主键的一部分，则需要移除创建新表



### 第三范式

非主键属性只依赖于键，不能依赖于其他非主键属性



1、首先满足第二范式

2、如果非主键属性还依赖于其他非主属性，则需要移除创建新表



## 命名规范

1、Table Space

表空间分类 _ 数据分类 _ 数据用途 _ 8K01



2、Buffer Pool

BP_ 用途 _ 8k01



3、索引

IDX _ col name _ 索引类型



4、key

主键：PK_ col name

外键：FK _ col name _ 类型



5、约束

CK _ col name _ 类型



6、job

job_ 



7、Sequence

SEQ_ 



8、存储过程

SP _ 



## 元数据

元数据是用于描述数据的信息





